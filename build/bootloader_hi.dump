
bootloader_hi:     file format elf64-littleriscv


Disassembly of section .text:

00000000805e0000 <_start>:
    805e0000:	0140006f          	j	805e0014 <main>
    805e0004:	6f6f624b          	fnmsub.q	ft4,ft10,fs6,fa3,unknown
    805e0008:	5f74                	lw	a3,124(a4)
    805e000a:	3176                	fld	ft2,376(sp)
    805e000c:	342e                	fld	fs0,232(sp)
    805e000e:	312e                	fld	ft2,232(sp)
    805e0010:	0000                	unimp
	...

00000000805e0014 <main>:
 * -------------------------------------------------------------
 */

//============
int main(void)
{
    805e0014:	7119                	addi	sp,sp,-128
    805e0016:	fc86                	sd	ra,120(sp)
    805e0018:	f8a2                	sd	s0,112(sp)
    805e001a:	f4a6                	sd	s1,104(sp)
    805e001c:	f0ca                	sd	s2,96(sp)
    805e001e:	ecce                	sd	s3,88(sp)
    805e0020:	e8d2                	sd	s4,80(sp)
    805e0022:	e4d6                	sd	s5,72(sp)
    805e0024:	e0da                	sd	s6,64(sp)
    805e0026:	fc5e                	sd	s7,56(sp)
    805e0028:	f862                	sd	s8,48(sp)
    805e002a:	f466                	sd	s9,40(sp)
    805e002c:	f06a                	sd	s10,32(sp)
    805e002e:	ec6e                	sd	s11,24(sp)
    while(dst < &_ebss)
        *dst++ = 0;
    */

    // Check the core we are running on
    i = read_csr(mhartid);
    805e0030:	f14027f3          	csrr	a5,mhartid
    805e0034:	2781                	sext.w	a5,a5
    805e0036:	00002717          	auipc	a4,0x2
    805e003a:	f2f72d23          	sw	a5,-198(a4) # 805e1f70 <i>
    //--------------------------------------------------------
    if (i != 0) {
    805e003e:	44079663          	bnez	a5,805e048a <main+0x476>
    // ============================
    // ==== Running on core #0 ====
    // ============================

    // wait for synchronization with core #1
    while (core0_sync == 0) {
    805e0042:	00002797          	auipc	a5,0x2
    805e0046:	f0678793          	addi	a5,a5,-250 # 805e1f48 <core0_sync>
    805e004a:	4398                	lw	a4,0(a5)
    805e004c:	e701                	bnez	a4,805e0054 <main+0x40>
        asm("nop");
    805e004e:	0001                	nop
    while (core0_sync == 0) {
    805e0050:	4398                	lw	a4,0(a5)
    805e0052:	df75                	beqz	a4,805e004e <main+0x3a>
    }

    // === Printing and Flash XiP mode were initialized in stage_0 ===

    // Check if interractive mode can be enabled
    boot_pin = 1;
    805e0054:	4785                	li	a5,1
    805e0056:	00002717          	auipc	a4,0x2
    805e005a:	acf72323          	sw	a5,-1338(a4) # 805e1b1c <boot_pin>
    cfg_magic = cfg_flash_ptr[BOOT_CONFIG_ITEMS*8];
    805e005e:	540047b7          	lui	a5,0x54004
    805e0062:	1007a703          	lw	a4,256(a5) # 54004100 <_start-0x2c5dbf00>
    print_enabled = (cfg_magic == MAGIC_ID) ? 0 : 1;
    805e0066:	5aa5d7b7          	lui	a5,0x5aa5d
    805e006a:	0c078793          	addi	a5,a5,192 # 5aa5d0c0 <_start-0x25b82f40>
    805e006e:	40f706b3          	sub	a3,a4,a5
    805e0072:	00d036b3          	snez	a3,a3
    cfg_magic = cfg_flash_ptr[BOOT_CONFIG_ITEMS*8];
    805e0076:	00002617          	auipc	a2,0x2
    805e007a:	ece62123          	sw	a4,-318(a2) # 805e1f38 <cfg_magic>
    print_enabled = (cfg_magic == MAGIC_ID) ? 0 : 1;
    805e007e:	00002617          	auipc	a2,0x2
    805e0082:	eed62d23          	sw	a3,-262(a2) # 805e1f78 <print_enabled>
    805e0086:	00002497          	auipc	s1,0x2
    805e008a:	ef248493          	addi	s1,s1,-270 # 805e1f78 <print_enabled>
    if (print_enabled) {
    805e008e:	00f717e3          	bne	a4,a5,805e089c <main+0x888>
    805e0092:	00002417          	auipc	s0,0x2
    805e0096:	f3643403          	ld	s0,-202(s0) # 805e1fc8 <__TMC_END__+0x8>
    LOG("\nK210 bootloader by LoBo v.1.4.2\n\n");

    LOG("* Find applications in MAIN parameters\n");

    // First we check the main config sector
    app_flash_start = DEFAULT_APP_ADDR;
    805e009a:	67c1                	lui	a5,0x10
check_cfg:
    // Check all boot entries
    for (i = 0; i < BOOT_CONFIG_ITEMS; i++) {
        get_params(i);

        if ((cfg_magic & MAGIC_ID_MASK) == MAGIC_ID) {
    805e009c:	5aa5d937          	lui	s2,0x5aa5d
            crc = (crc >> 1) ^ (0xEDB88320 & mask);
    805e00a0:	edb88b37          	lui	s6,0xedb88
    app_flash_start = DEFAULT_APP_ADDR;
    805e00a4:	00002717          	auipc	a4,0x2
    805e00a8:	a2f72e23          	sw	a5,-1476(a4) # 805e1ae0 <app_flash_start>
    cfg_offset = 0;
    805e00ac:	4601                	li	a2,0
    805e00ae:	00002797          	auipc	a5,0x2
    805e00b2:	e807a723          	sw	zero,-370(a5) # 805e1f3c <cfg_offset>
    805e00b6:	00002c17          	auipc	s8,0x2
    805e00ba:	e6ac0c13          	addi	s8,s8,-406 # 805e1f20 <cfg_address>
    805e00be:	00002d97          	auipc	s11,0x2
    805e00c2:	e82d8d93          	addi	s11,s11,-382 # 805e1f40 <cfg_size>
    805e00c6:	00002d17          	auipc	s10,0x2
    805e00ca:	e72d0d13          	addi	s10,s10,-398 # 805e1f38 <cfg_magic>
    805e00ce:	00002a97          	auipc	s5,0x2
    805e00d2:	ea2a8a93          	addi	s5,s5,-350 # 805e1f70 <i>
    805e00d6:	00002a17          	auipc	s4,0x2
    805e00da:	a3aa0a13          	addi	s4,s4,-1478 # 805e1b10 <available_apps>
    805e00de:	00002b97          	auipc	s7,0x2
    805e00e2:	a02b8b93          	addi	s7,s7,-1534 # 805e1ae0 <app_flash_start>
    805e00e6:	00002997          	auipc	s3,0x2
    805e00ea:	e5698993          	addi	s3,s3,-426 # 805e1f3c <cfg_offset>
        if ((cfg_magic & MAGIC_ID_MASK) == MAGIC_ID) {
    805e00ee:	0c090913          	addi	s2,s2,192 # 5aa5d0c0 <_start-0x25b82f40>
            crc = (crc >> 1) ^ (0xEDB88320 & mask);
    805e00f2:	320b0b13          	addi	s6,s6,800 # ffffffffedb88320 <context+0xffffffff6d5a6328>
    for (i = 0; i < BOOT_CONFIG_ITEMS; i++) {
    805e00f6:	00002797          	auipc	a5,0x2
    805e00fa:	e607ad23          	sw	zero,-390(a5) # 805e1f70 <i>
    805e00fe:	4581                	li	a1,0
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0100:	54004cb7          	lui	s9,0x54004
    805e0104:	a819                	j	805e011a <main+0x106>
    for (i = 0; i < BOOT_CONFIG_ITEMS; i++) {
    805e0106:	2585                	addiw	a1,a1,1
    805e0108:	00002717          	auipc	a4,0x2
    805e010c:	e6b72423          	sw	a1,-408(a4) # 805e1f70 <i>
    805e0110:	479d                	li	a5,7
    805e0112:	2eb7e063          	bltu	a5,a1,805e03f2 <main+0x3de>
    805e0116:	0009a603          	lw	a2,0(s3)
    offset = (i*32) + cfg_offset + 0x10; // 8bit offset in current config sector
    805e011a:	0055979b          	slliw	a5,a1,0x5
    805e011e:	9fb1                	addw	a5,a5,a2
    805e0120:	0107881b          	addiw	a6,a5,16
    offset = (i*8) + (cfg_offset / 4); // 32bit offset in current config sector
    805e0124:	0026561b          	srliw	a2,a2,0x2
    805e0128:	0035969b          	slliw	a3,a1,0x3
    805e012c:	9eb1                	addw	a3,a3,a2
    key = cfg_flash_bptr[offset];        // dummy read needed to switch to 8bit XiP read
    805e012e:	1802                	slli	a6,a6,0x20
    cfg_address = cfg_flash_ptr[offset + 1];
    805e0130:	0016889b          	addiw	a7,a3,1
    cfg_size = cfg_flash_ptr[offset + 2];
    805e0134:	0026851b          	addiw	a0,a3,2
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e0138:	0036861b          	addiw	a2,a3,3
    key = cfg_flash_bptr[offset];        // dummy read needed to switch to 8bit XiP read
    805e013c:	02085813          	srli	a6,a6,0x20
    805e0140:	9866                	add	a6,a6,s9
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0142:	1682                	slli	a3,a3,0x20
    cfg_address = cfg_flash_ptr[offset + 1];
    805e0144:	1882                	slli	a7,a7,0x20
    cfg_size = cfg_flash_ptr[offset + 2];
    805e0146:	1502                	slli	a0,a0,0x20
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e0148:	1602                	slli	a2,a2,0x20
    key = cfg_flash_bptr[offset];        // dummy read needed to switch to 8bit XiP read
    805e014a:	00084803          	lbu	a6,0(a6)
        cfg_info[n] = cfg_flash_bptr[offset + n];
    805e014e:	01178e1b          	addiw	t3,a5,17
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0152:	9281                	srli	a3,a3,0x20
    cfg_address = cfg_flash_ptr[offset + 1];
    805e0154:	0208d893          	srli	a7,a7,0x20
    cfg_size = cfg_flash_ptr[offset + 2];
    805e0158:	9101                	srli	a0,a0,0x20
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e015a:	9201                	srli	a2,a2,0x20
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e015c:	068a                	slli	a3,a3,0x2
    cfg_address = cfg_flash_ptr[offset + 1];
    805e015e:	088a                	slli	a7,a7,0x2
    cfg_size = cfg_flash_ptr[offset + 2];
    805e0160:	050a                	slli	a0,a0,0x2
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e0162:	060a                	slli	a2,a2,0x2
        cfg_info[n] = cfg_flash_bptr[offset + n];
    805e0164:	1e02                	slli	t3,t3,0x20
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0166:	96e6                	add	a3,a3,s9
        cfg_info[n] = cfg_flash_bptr[offset + n];
    805e0168:	020e5e13          	srli	t3,t3,0x20
    cfg_address = cfg_flash_ptr[offset + 1];
    805e016c:	98e6                	add	a7,a7,s9
    cfg_size = cfg_flash_ptr[offset + 2];
    805e016e:	9566                	add	a0,a0,s9
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e0170:	9666                	add	a2,a2,s9
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0172:	0006a303          	lw	t1,0(a3)
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e0176:	4210                	lw	a2,0(a2)
    cfg_address = cfg_flash_ptr[offset + 1];
    805e0178:	0008a883          	lw	a7,0(a7)
    cfg_size = cfg_flash_ptr[offset + 2];
    805e017c:	4108                	lw	a0,0(a0)
        cfg_info[n] = cfg_flash_bptr[offset + n];
    805e017e:	01cc86b3          	add	a3,s9,t3
    805e0182:	00002717          	auipc	a4,0x2
    805e0186:	db070323          	sb	a6,-602(a4) # 805e1f28 <cfg_info>
    805e018a:	0006ce03          	lbu	t3,0(a3)
    805e018e:	0127869b          	addiw	a3,a5,18
    805e0192:	1682                	slli	a3,a3,0x20
    805e0194:	9281                	srli	a3,a3,0x20
    805e0196:	00002717          	auipc	a4,0x2
    805e019a:	d9c709a3          	sb	t3,-621(a4) # 805e1f29 <cfg_info+0x1>
    805e019e:	96e6                	add	a3,a3,s9
    805e01a0:	0006ce03          	lbu	t3,0(a3)
    805e01a4:	0137869b          	addiw	a3,a5,19
    805e01a8:	1682                	slli	a3,a3,0x20
    805e01aa:	9281                	srli	a3,a3,0x20
    805e01ac:	00002717          	auipc	a4,0x2
    805e01b0:	d7c70f23          	sb	t3,-642(a4) # 805e1f2a <cfg_info+0x2>
    805e01b4:	96e6                	add	a3,a3,s9
    805e01b6:	0006ce03          	lbu	t3,0(a3)
    805e01ba:	0147869b          	addiw	a3,a5,20
    805e01be:	1682                	slli	a3,a3,0x20
    805e01c0:	9281                	srli	a3,a3,0x20
    805e01c2:	00002717          	auipc	a4,0x2
    805e01c6:	d7c704a3          	sb	t3,-663(a4) # 805e1f2b <cfg_info+0x3>
    805e01ca:	96e6                	add	a3,a3,s9
    805e01cc:	0006ce03          	lbu	t3,0(a3)
    805e01d0:	0157869b          	addiw	a3,a5,21
    805e01d4:	1682                	slli	a3,a3,0x20
    805e01d6:	9281                	srli	a3,a3,0x20
    805e01d8:	00002717          	auipc	a4,0x2
    805e01dc:	d5c70a23          	sb	t3,-684(a4) # 805e1f2c <cfg_info+0x4>
    805e01e0:	96e6                	add	a3,a3,s9
    805e01e2:	0006ce03          	lbu	t3,0(a3)
    805e01e6:	0167869b          	addiw	a3,a5,22
    805e01ea:	1682                	slli	a3,a3,0x20
    805e01ec:	9281                	srli	a3,a3,0x20
    805e01ee:	00002717          	auipc	a4,0x2
    805e01f2:	d3c70fa3          	sb	t3,-705(a4) # 805e1f2d <cfg_info+0x5>
    805e01f6:	96e6                	add	a3,a3,s9
    805e01f8:	0006ce03          	lbu	t3,0(a3)
    805e01fc:	0177869b          	addiw	a3,a5,23
    805e0200:	1682                	slli	a3,a3,0x20
    805e0202:	9281                	srli	a3,a3,0x20
    805e0204:	00002717          	auipc	a4,0x2
    805e0208:	d3c70523          	sb	t3,-726(a4) # 805e1f2e <cfg_info+0x6>
    805e020c:	96e6                	add	a3,a3,s9
    805e020e:	0006ce03          	lbu	t3,0(a3)
    805e0212:	0187869b          	addiw	a3,a5,24
    805e0216:	1682                	slli	a3,a3,0x20
    805e0218:	9281                	srli	a3,a3,0x20
    805e021a:	00002717          	auipc	a4,0x2
    805e021e:	d1c70aa3          	sb	t3,-747(a4) # 805e1f2f <cfg_info+0x7>
    805e0222:	96e6                	add	a3,a3,s9
    805e0224:	0006ce03          	lbu	t3,0(a3)
    805e0228:	0197869b          	addiw	a3,a5,25
    805e022c:	1682                	slli	a3,a3,0x20
    805e022e:	9281                	srli	a3,a3,0x20
    805e0230:	00002717          	auipc	a4,0x2
    805e0234:	d1c70023          	sb	t3,-768(a4) # 805e1f30 <cfg_info+0x8>
    805e0238:	96e6                	add	a3,a3,s9
    805e023a:	0006ce03          	lbu	t3,0(a3)
    805e023e:	01a7869b          	addiw	a3,a5,26
    805e0242:	1682                	slli	a3,a3,0x20
    805e0244:	9281                	srli	a3,a3,0x20
    805e0246:	00002717          	auipc	a4,0x2
    805e024a:	cfc705a3          	sb	t3,-789(a4) # 805e1f31 <cfg_info+0x9>
    805e024e:	96e6                	add	a3,a3,s9
    805e0250:	0006ce03          	lbu	t3,0(a3)
    805e0254:	01b7869b          	addiw	a3,a5,27
    805e0258:	1682                	slli	a3,a3,0x20
    805e025a:	9281                	srli	a3,a3,0x20
    805e025c:	00002717          	auipc	a4,0x2
    805e0260:	cdc70b23          	sb	t3,-810(a4) # 805e1f32 <cfg_info+0xa>
    805e0264:	96e6                	add	a3,a3,s9
    805e0266:	0006ce03          	lbu	t3,0(a3)
    805e026a:	01c7869b          	addiw	a3,a5,28
    805e026e:	1682                	slli	a3,a3,0x20
    805e0270:	9281                	srli	a3,a3,0x20
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0272:	00002717          	auipc	a4,0x2
    805e0276:	cc672323          	sw	t1,-826(a4) # 805e1f38 <cfg_magic>
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e027a:	00002717          	auipc	a4,0x2
    805e027e:	cac72523          	sw	a2,-854(a4) # 805e1f24 <cfg_crc>
        cfg_info[n] = cfg_flash_bptr[offset + n];
    805e0282:	96e6                	add	a3,a3,s9
    cfg_address = cfg_flash_ptr[offset + 1];
    805e0284:	00002717          	auipc	a4,0x2
    805e0288:	c9172e23          	sw	a7,-868(a4) # 805e1f20 <cfg_address>
    cfg_size = cfg_flash_ptr[offset + 2];
    805e028c:	00002717          	auipc	a4,0x2
    805e0290:	caa72a23          	sw	a0,-844(a4) # 805e1f40 <cfg_size>
    key = cfg_flash_bptr[offset];        // dummy read needed to switch to 8bit XiP read
    805e0294:	00002717          	auipc	a4,0x2
    805e0298:	cf070023          	sb	a6,-800(a4) # 805e1f74 <key>
        cfg_info[n] = cfg_flash_bptr[offset + n];
    805e029c:	00002717          	auipc	a4,0x2
    805e02a0:	c9c70ba3          	sb	t3,-873(a4) # 805e1f33 <cfg_info+0xb>
    805e02a4:	0006c603          	lbu	a2,0(a3)
    805e02a8:	01d7869b          	addiw	a3,a5,29
    805e02ac:	1682                	slli	a3,a3,0x20
    805e02ae:	9281                	srli	a3,a3,0x20
    805e02b0:	00002717          	auipc	a4,0x2
    805e02b4:	c8c70223          	sb	a2,-892(a4) # 805e1f34 <cfg_info+0xc>
    805e02b8:	96e6                	add	a3,a3,s9
    805e02ba:	0006c683          	lbu	a3,0(a3)
    805e02be:	27f9                	addiw	a5,a5,30
    805e02c0:	1782                	slli	a5,a5,0x20
    805e02c2:	9381                	srli	a5,a5,0x20
    805e02c4:	00002717          	auipc	a4,0x2
    805e02c8:	c6d708a3          	sb	a3,-911(a4) # 805e1f35 <cfg_info+0xd>
    805e02cc:	97e6                	add	a5,a5,s9
    805e02ce:	0007c783          	lbu	a5,0(a5)
        if ((cfg_magic & MAGIC_ID_MASK) == MAGIC_ID) {
    805e02d2:	ff037313          	andi	t1,t1,-16
    cfg_info[15] = 0;
    805e02d6:	00002717          	auipc	a4,0x2
    805e02da:	c60700a3          	sb	zero,-927(a4) # 805e1f37 <cfg_info+0xf>
        cfg_info[n] = cfg_flash_bptr[offset + n];
    805e02de:	00002717          	auipc	a4,0x2
    805e02e2:	c4f70c23          	sb	a5,-936(a4) # 805e1f36 <cfg_info+0xe>
        if ((cfg_magic & MAGIC_ID_MASK) == MAGIC_ID) {
    805e02e6:	e32310e3          	bne	t1,s2,805e0106 <main+0xf2>
            // *** Valid configuration found
            LOG("    %u: '%15s', ", i, cfg_info);
    805e02ea:	409c                	lw	a5,0(s1)
    805e02ec:	1e078e63          	beqz	a5,805e04e8 <main+0x4d4>
    805e02f0:	601c                	ld	a5,0(s0)
    805e02f2:	00002617          	auipc	a2,0x2
    805e02f6:	c3660613          	addi	a2,a2,-970 # 805e1f28 <cfg_info>
    805e02fa:	00001517          	auipc	a0,0x1
    805e02fe:	57e50513          	addi	a0,a0,1406 # 805e1878 <CSWTCH.3+0x70>
    805e0302:	9782                	jalr	a5
    805e0304:	0c800513          	li	a0,200
    805e0308:	00001097          	auipc	ra,0x1
    805e030c:	df4080e7          	jalr	-524(ra) # 805e10fc <usleep>
            // Check if the Flash address is in range (512K ~ 8MB)
            if ((cfg_address >= MIN_APP_FLASH_ADDR) && (cfg_address <= MAX_APP_FLASH_ADDR)) {
    805e0310:	000c2583          	lw	a1,0(s8)
    805e0314:	77c1                	lui	a5,0xffff0
    805e0316:	007f0737          	lui	a4,0x7f0
    805e031a:	9fad                	addw	a5,a5,a1
    805e031c:	1af76563          	bltu	a4,a5,805e04c6 <main+0x4b2>
    805e0320:	000da603          	lw	a2,0(s11)
                // Address valid, check if the size is in range (16K ~ 3MB)
                if ((cfg_size >= MIN_APP_FLASH_SIZE) && (cfg_size <= MAX_APP_FLASH_SIZE)) {
    805e0324:	7771                	lui	a4,0xffffc
    805e0326:	409c                	lw	a5,0(s1)
    805e0328:	00c706bb          	addw	a3,a4,a2
    805e032c:	002fc737          	lui	a4,0x2fc
    805e0330:	26d76663          	bltu	a4,a3,805e059c <main+0x588>
                    // Valid size
                    LOG("@ 0x%08X, size=%u, ", cfg_address, cfg_size);
    805e0334:	cf89                	beqz	a5,805e034e <main+0x33a>
    805e0336:	601c                	ld	a5,0(s0)
    805e0338:	00001517          	auipc	a0,0x1
    805e033c:	55850513          	addi	a0,a0,1368 # 805e1890 <CSWTCH.3+0x88>
    805e0340:	9782                	jalr	a5
    805e0342:	0c800513          	li	a0,200
    805e0346:	00001097          	auipc	ra,0x1
    805e034a:	db6080e7          	jalr	-586(ra) # 805e10fc <usleep>
                    /*
                     * Basic check passed, now we can check the application's validity
                     * If in interractive mode, all applications are checked,
                     * otherwise, the application is checked only if flagged as active
                     */
                    if ((cfg_magic & CFG_APP_FLAG_ACTIVE) || (boot_pin == 0)) {
    805e034e:	000d2683          	lw	a3,0(s10)
    805e0352:	0016f793          	andi	a5,a3,1
    805e0356:	1a079963          	bnez	a5,805e0508 <main+0x4f4>
    805e035a:	00001797          	auipc	a5,0x1
    805e035e:	7c278793          	addi	a5,a5,1986 # 805e1b1c <boot_pin>
    805e0362:	439c                	lw	a5,0(a5)
    805e0364:	1a078263          	beqz	a5,805e0508 <main+0x4f4>
                        }
                        LOG("App ok, ");
                        available_apps[i] = 1;
                    }
                    else {
                        LOG("not checked, ");
    805e0368:	409c                	lw	a5,0(s1)
    805e036a:	16078c63          	beqz	a5,805e04e2 <main+0x4ce>
    805e036e:	601c                	ld	a5,0(s0)
    805e0370:	00001517          	auipc	a0,0x1
    805e0374:	58050513          	addi	a0,a0,1408 # 805e18f0 <CSWTCH.3+0xe8>
    805e0378:	9782                	jalr	a5
    805e037a:	0c800513          	li	a0,200
    805e037e:	00001097          	auipc	ra,0x1
    805e0382:	d7e080e7          	jalr	-642(ra) # 805e10fc <usleep>
                    }
                    // ** Check if this is an active config (bit #0 set)
                    if ((cfg_magic & CFG_APP_FLAG_ACTIVE) == 0) {
    805e0386:	000d2683          	lw	a3,0(s10)
    805e038a:	409c                	lw	a5,0(s1)
    805e038c:	8a85                	andi	a3,a3,1
    805e038e:	2c068563          	beqz	a3,805e0658 <main+0x644>
                        LOG("NOT ");
                    }
                    else {
                        if (app_flash_start == DEFAULT_APP_ADDR) {
    805e0392:	000ba603          	lw	a2,0(s7)
    805e0396:	66c1                	lui	a3,0x10
    805e0398:	00d61e63          	bne	a2,a3,805e03b4 <main+0x3a0>
                            app_size = cfg_size;
    805e039c:	000da603          	lw	a2,0(s11)
                            app_flash_start = cfg_address;
    805e03a0:	000c2683          	lw	a3,0(s8)
                            app_size = cfg_size;
    805e03a4:	00001717          	auipc	a4,0x1
    805e03a8:	76c72223          	sw	a2,1892(a4) # 805e1b08 <app_size>
                            app_flash_start = cfg_address;
    805e03ac:	00001717          	auipc	a4,0x1
    805e03b0:	72d72a23          	sw	a3,1844(a4) # 805e1ae0 <app_flash_start>
                        }
                        if (boot_pin > 0) {
    805e03b4:	00001717          	auipc	a4,0x1
    805e03b8:	76870713          	addi	a4,a4,1896 # 805e1b1c <boot_pin>
    805e03bc:	4314                	lw	a3,0(a4)
    805e03be:	56069063          	bnez	a3,805e091e <main+0x90a>
                            // Active application found and checked and not in interractive mode
                            LOG("ACTIVE\n");
                            break;
                        }
                    }
                    LOG("ACTIVE\n");
    805e03c2:	12078063          	beqz	a5,805e04e2 <main+0x4ce>
    805e03c6:	601c                	ld	a5,0(s0)
    805e03c8:	00001517          	auipc	a0,0x1
    805e03cc:	54050513          	addi	a0,a0,1344 # 805e1908 <CSWTCH.3+0x100>
    805e03d0:	9782                	jalr	a5
    805e03d2:	0c800513          	li	a0,200
    805e03d6:	00001097          	auipc	ra,0x1
    805e03da:	d26080e7          	jalr	-730(ra) # 805e10fc <usleep>
    805e03de:	000aa583          	lw	a1,0(s5)
    for (i = 0; i < BOOT_CONFIG_ITEMS; i++) {
    805e03e2:	479d                	li	a5,7
    805e03e4:	2585                	addiw	a1,a1,1
    805e03e6:	00002717          	auipc	a4,0x2
    805e03ea:	b8b72523          	sw	a1,-1142(a4) # 805e1f70 <i>
    805e03ee:	d2b7f4e3          	bleu	a1,a5,805e0116 <main+0x102>
        }
    }

    // check if any valid application was found
    for (boot_entry = 0; boot_entry < BOOT_CONFIG_ITEMS; boot_entry++) {
        if (available_apps[boot_entry]) break;
    805e03f2:	000a4783          	lbu	a5,0(s4)
    for (boot_entry = 0; boot_entry < BOOT_CONFIG_ITEMS; boot_entry++) {
    805e03f6:	00001717          	auipc	a4,0x1
    805e03fa:	72072123          	sw	zero,1826(a4) # 805e1b18 <boot_entry>
        if (available_apps[boot_entry]) break;
    805e03fe:	38079b63          	bnez	a5,805e0794 <main+0x780>
    805e0402:	001a4783          	lbu	a5,1(s4)
    for (boot_entry = 0; boot_entry < BOOT_CONFIG_ITEMS; boot_entry++) {
    805e0406:	4705                	li	a4,1
    805e0408:	00001697          	auipc	a3,0x1
    805e040c:	70e6a823          	sw	a4,1808(a3) # 805e1b18 <boot_entry>
        if (available_apps[boot_entry]) break;
    805e0410:	38079263          	bnez	a5,805e0794 <main+0x780>
    805e0414:	002a4783          	lbu	a5,2(s4)
    805e0418:	50079163          	bnez	a5,805e091a <main+0x906>
    805e041c:	003a4783          	lbu	a5,3(s4)
    805e0420:	36079563          	bnez	a5,805e078a <main+0x776>
    805e0424:	004a4783          	lbu	a5,4(s4)
    805e0428:	6e079163          	bnez	a5,805e0b0a <main+0xaf6>
    805e042c:	005a4783          	lbu	a5,5(s4)
    805e0430:	6c079b63          	bnez	a5,805e0b06 <main+0xaf2>
    805e0434:	006a4783          	lbu	a5,6(s4)
    805e0438:	6c079563          	bnez	a5,805e0b02 <main+0xaee>
    805e043c:	007a4783          	lbu	a5,7(s4)
    805e0440:	6a079f63          	bnez	a5,805e0afe <main+0xaea>
    }
    if ((app_flash_start == DEFAULT_APP_ADDR) && (boot_entry >= BOOT_CONFIG_ITEMS)) {
    805e0444:	000ba703          	lw	a4,0(s7)
    805e0448:	47a1                	li	a5,8
    805e044a:	00001697          	auipc	a3,0x1
    805e044e:	6cf6a723          	sw	a5,1742(a3) # 805e1b18 <boot_entry>
    805e0452:	67c1                	lui	a5,0x10
    805e0454:	54f71063          	bne	a4,a5,805e0994 <main+0x980>
        // No valid application found
        if (cfg_offset == 0) {
    805e0458:	0009a703          	lw	a4,0(s3)
    805e045c:	409c                	lw	a5,0(s1)
    805e045e:	6a071863          	bnez	a4,805e0b0e <main+0xafa>
            // no valid entry found in main config sector, check the backup one
            LOG("\n* Find applications in BACKUP parameters\n");
    805e0462:	cf89                	beqz	a5,805e047c <main+0x468>
    805e0464:	601c                	ld	a5,0(s0)
    805e0466:	00001517          	auipc	a0,0x1
    805e046a:	4ca50513          	addi	a0,a0,1226 # 805e1930 <CSWTCH.3+0x128>
    805e046e:	9782                	jalr	a5
    805e0470:	0c800513          	li	a0,200
    805e0474:	00001097          	auipc	ra,0x1
    805e0478:	c88080e7          	jalr	-888(ra) # 805e10fc <usleep>
            cfg_offset = 4096;
    805e047c:	6785                	lui	a5,0x1
    805e047e:	00002717          	auipc	a4,0x2
    805e0482:	aaf72f23          	sw	a5,-1346(a4) # 805e1f3c <cfg_offset>
            //if (boot_pin == 0) {
            //    cfg_magic = cfg_flash_ptr[4096+BOOT_CONFIG_ITEMS];
            //    boot_pin = (cfg_magic == MAGIC_ID) ? 1 : 0;
            //}
            goto check_cfg;
    805e0486:	6605                	lui	a2,0x1
    805e0488:	b1bd                	j	805e00f6 <main+0xe2>
        while (core1_sync == 0) {
    805e048a:	00002797          	auipc	a5,0x2
    805e048e:	ac278793          	addi	a5,a5,-1342 # 805e1f4c <core1_sync>
    805e0492:	4398                	lw	a4,0(a5)
        core0_sync = 1;
    805e0494:	4685                	li	a3,1
    805e0496:	00002617          	auipc	a2,0x2
    805e049a:	aad62923          	sw	a3,-1358(a2) # 805e1f48 <core0_sync>
        while (core1_sync == 0) {
    805e049e:	e701                	bnez	a4,805e04a6 <main+0x492>
            asm("nop");
    805e04a0:	0001                	nop
        while (core1_sync == 0) {
    805e04a2:	4398                	lw	a4,0(a5)
    805e04a4:	df75                	beqz	a4,805e04a0 <main+0x48c>
        usleep(1000);
    805e04a6:	3e800513          	li	a0,1000
    805e04aa:	00001097          	auipc	ra,0x1
    805e04ae:	c52080e7          	jalr	-942(ra) # 805e10fc <usleep>
        asm("fence");   // D-Cache; this may not be necessary, but it looks it doesn't hurt if it is executed
    805e04b2:	0ff0000f          	fence
        asm("fence.i"); // I-Cache
    805e04b6:	0000100f          	fence.i
        asm ("jr %0" : : "r"(app_start));
    805e04ba:	4785                	li	a5,1
    805e04bc:	07fe                	slli	a5,a5,0x1f
    805e04be:	8782                	jr	a5
            asm("nop");
    805e04c0:	0001                	nop
    805e04c2:	0001                	nop
    805e04c4:	bff5                	j	805e04c0 <main+0x4ac>
                LOG("address Error!\n");
    805e04c6:	409c                	lw	a5,0(s1)
    805e04c8:	cf89                	beqz	a5,805e04e2 <main+0x4ce>
    805e04ca:	601c                	ld	a5,0(s0)
    805e04cc:	00001517          	auipc	a0,0x1
    805e04d0:	45450513          	addi	a0,a0,1108 # 805e1920 <CSWTCH.3+0x118>
    805e04d4:	9782                	jalr	a5
    805e04d6:	0c800513          	li	a0,200
    805e04da:	00001097          	auipc	ra,0x1
    805e04de:	c22080e7          	jalr	-990(ra) # 805e10fc <usleep>
    805e04e2:	000aa583          	lw	a1,0(s5)
    805e04e6:	b105                	j	805e0106 <main+0xf2>
            if ((cfg_address >= MIN_APP_FLASH_ADDR) && (cfg_address <= MAX_APP_FLASH_ADDR)) {
    805e04e8:	77c1                	lui	a5,0xffff0
    805e04ea:	011788bb          	addw	a7,a5,a7
    805e04ee:	007f07b7          	lui	a5,0x7f0
    805e04f2:	c117eae3          	bltu	a5,a7,805e0106 <main+0xf2>
                if ((cfg_size >= MIN_APP_FLASH_SIZE) && (cfg_size <= MAX_APP_FLASH_SIZE)) {
    805e04f6:	77f1                	lui	a5,0xffffc
    805e04f8:	9d3d                	addw	a0,a0,a5
    805e04fa:	002fc7b7          	lui	a5,0x2fc
    805e04fe:	e4a7f8e3          	bleu	a0,a5,805e034e <main+0x33a>
    805e0502:	000aa583          	lw	a1,0(s5)
    805e0506:	b101                	j	805e0106 <main+0xf2>
    uint8_t  key = app_flash_ptr[cfg_address];          // must be 0, SHA256 key NOT specified
    805e0508:	000c2783          	lw	a5,0(s8)
    805e050c:	54000837          	lui	a6,0x54000
    805e0510:	02079613          	slli	a2,a5,0x20
    805e0514:	9201                	srli	a2,a2,0x20
    805e0516:	9642                	add	a2,a2,a6
    if (key != 0) return 0;
    805e0518:	00064603          	lbu	a2,0(a2)
    805e051c:	ee39                	bnez	a2,805e057a <main+0x566>
    val += app_flash_ptr[addr+2] << 16;
    805e051e:	0037861b          	addiw	a2,a5,3
    val += app_flash_ptr[addr+3] << 24;
    805e0522:	0047851b          	addiw	a0,a5,4
    val += app_flash_ptr[addr+2] << 16;
    805e0526:	1602                	slli	a2,a2,0x20
    val += app_flash_ptr[addr+3] << 24;
    805e0528:	1502                	slli	a0,a0,0x20
    uint32_t sz = flash2uint32(cfg_address+1);          // app size
    805e052a:	0017859b          	addiw	a1,a5,1
    val += app_flash_ptr[addr+2] << 16;
    805e052e:	9201                	srli	a2,a2,0x20
    val += app_flash_ptr[addr+3] << 24;
    805e0530:	9101                	srli	a0,a0,0x20
    val += app_flash_ptr[addr+1] << 8;
    805e0532:	2789                	addiw	a5,a5,2
    val += app_flash_ptr[addr+2] << 16;
    805e0534:	9642                	add	a2,a2,a6
    val += app_flash_ptr[addr+3] << 24;
    805e0536:	9542                	add	a0,a0,a6
    uint32_t val = app_flash_ptr[addr];
    805e0538:	1582                	slli	a1,a1,0x20
    val += app_flash_ptr[addr+1] << 8;
    805e053a:	1782                	slli	a5,a5,0x20
    val += app_flash_ptr[addr+2] << 16;
    805e053c:	00064603          	lbu	a2,0(a2)
    val += app_flash_ptr[addr+3] << 24;
    805e0540:	00054503          	lbu	a0,0(a0)
    uint32_t val = app_flash_ptr[addr];
    805e0544:	9181                	srli	a1,a1,0x20
    val += app_flash_ptr[addr+1] << 8;
    805e0546:	9381                	srli	a5,a5,0x20
    805e0548:	97c2                	add	a5,a5,a6
    uint32_t val = app_flash_ptr[addr];
    805e054a:	95c2                	add	a1,a1,a6
    805e054c:	0005c803          	lbu	a6,0(a1)
    val += app_flash_ptr[addr+1] << 8;
    805e0550:	0007c583          	lbu	a1,0(a5) # 2fc000 <_start-0x802e4000>
    val += app_flash_ptr[addr+2] << 16;
    805e0554:	0106179b          	slliw	a5,a2,0x10
    val += app_flash_ptr[addr+3] << 24;
    805e0558:	0185161b          	slliw	a2,a0,0x18
    805e055c:	9fb1                	addw	a5,a5,a2
    805e055e:	010787bb          	addw	a5,a5,a6
    val += app_flash_ptr[addr+1] << 8;
    805e0562:	0085961b          	slliw	a2,a1,0x8
    val += app_flash_ptr[addr+3] << 24;
    805e0566:	9fb1                	addw	a5,a5,a2
    if ((cfg_magic & CFG_APP_FLAG_SIZE) && (cfg_size != sz)) return 0;
    805e0568:	0086f593          	andi	a1,a3,8
    val += app_flash_ptr[addr+3] << 24;
    805e056c:	0007881b          	sext.w	a6,a5
    if ((cfg_magic & CFG_APP_FLAG_SIZE) && (cfg_size != sz)) return 0;
    805e0570:	000da603          	lw	a2,0(s11)
    805e0574:	c5a1                	beqz	a1,805e05bc <main+0x5a8>
    805e0576:	06c80f63          	beq	a6,a2,805e05f4 <main+0x5e0>
                            LOG("App CHECK failed\n");
    805e057a:	409c                	lw	a5,0(s1)
    805e057c:	d3bd                	beqz	a5,805e04e2 <main+0x4ce>
    805e057e:	601c                	ld	a5,0(s0)
    805e0580:	00001517          	auipc	a0,0x1
    805e0584:	34850513          	addi	a0,a0,840 # 805e18c8 <CSWTCH.3+0xc0>
    805e0588:	9782                	jalr	a5
    805e058a:	0c800513          	li	a0,200
    805e058e:	00001097          	auipc	ra,0x1
    805e0592:	b6e080e7          	jalr	-1170(ra) # 805e10fc <usleep>
    805e0596:	000aa583          	lw	a1,0(s5)
    805e059a:	b6b5                	j	805e0106 <main+0xf2>
                    LOG("size Error!\n");
    805e059c:	d3b9                	beqz	a5,805e04e2 <main+0x4ce>
    805e059e:	601c                	ld	a5,0(s0)
    805e05a0:	00001517          	auipc	a0,0x1
    805e05a4:	37050513          	addi	a0,a0,880 # 805e1910 <CSWTCH.3+0x108>
    805e05a8:	9782                	jalr	a5
    805e05aa:	0c800513          	li	a0,200
    805e05ae:	00001097          	auipc	ra,0x1
    805e05b2:	b4e080e7          	jalr	-1202(ra) # 805e10fc <usleep>
    805e05b6:	000aa583          	lw	a1,0(s5)
    805e05ba:	b6b1                	j	805e0106 <main+0xf2>
    else if (cfg_size != sz) {
    805e05bc:	02c80c63          	beq	a6,a2,805e05f4 <main+0x5e0>
        LOG("app_size=%u, ", sz);
    805e05c0:	4090                	lw	a2,0(s1)
    805e05c2:	c605                	beqz	a2,805e05ea <main+0x5d6>
    805e05c4:	6014                	ld	a3,0(s0)
    805e05c6:	85c2                	mv	a1,a6
    805e05c8:	00001517          	auipc	a0,0x1
    805e05cc:	2e050513          	addi	a0,a0,736 # 805e18a8 <CSWTCH.3+0xa0>
    805e05d0:	e43e                	sd	a5,8(sp)
    805e05d2:	e042                	sd	a6,0(sp)
    805e05d4:	9682                	jalr	a3
    805e05d6:	0c800513          	li	a0,200
    805e05da:	00001097          	auipc	ra,0x1
    805e05de:	b22080e7          	jalr	-1246(ra) # 805e10fc <usleep>
    805e05e2:	000d2683          	lw	a3,0(s10)
    805e05e6:	67a2                	ld	a5,8(sp)
    805e05e8:	6802                	ld	a6,0(sp)
        cfg_size = sz;
    805e05ea:	00002717          	auipc	a4,0x2
    805e05ee:	94f72b23          	sw	a5,-1706(a4) # 805e1f40 <cfg_size>
    805e05f2:	8642                	mv	a2,a6
    if (cfg_magic & CFG_APP_FLAG_SHA256) {
    805e05f4:	0046f793          	andi	a5,a3,4
    805e05f8:	18079163          	bnez	a5,805e077a <main+0x766>
    if (cfg_magic & CFG_APP_FLAG_CRC32) {
    805e05fc:	8a89                	andi	a3,a3,2
    805e05fe:	eead                	bnez	a3,805e0678 <main+0x664>
                        LOG("App ok, ");
    805e0600:	409c                	lw	a5,0(s1)
    805e0602:	e38d                	bnez	a5,805e0624 <main+0x610>
                    if ((cfg_magic & CFG_APP_FLAG_ACTIVE) == 0) {
    805e0604:	000d2683          	lw	a3,0(s10)
                        available_apps[i] = 1;
    805e0608:	00002617          	auipc	a2,0x2
    805e060c:	96866603          	lwu	a2,-1688(a2) # 805e1f70 <i>
    805e0610:	9652                	add	a2,a2,s4
    805e0612:	4585                	li	a1,1
    805e0614:	00b60023          	sb	a1,0(a2)
                    if ((cfg_magic & CFG_APP_FLAG_ACTIVE) == 0) {
    805e0618:	8a85                	andi	a3,a3,1
    805e061a:	d6069ce3          	bnez	a3,805e0392 <main+0x37e>
    805e061e:	000aa583          	lw	a1,0(s5)
    805e0622:	b4d5                	j	805e0106 <main+0xf2>
                        LOG("App ok, ");
    805e0624:	601c                	ld	a5,0(s0)
    805e0626:	00001517          	auipc	a0,0x1
    805e062a:	2ba50513          	addi	a0,a0,698 # 805e18e0 <CSWTCH.3+0xd8>
    805e062e:	9782                	jalr	a5
    805e0630:	0c800513          	li	a0,200
    805e0634:	00001097          	auipc	ra,0x1
    805e0638:	ac8080e7          	jalr	-1336(ra) # 805e10fc <usleep>
                        available_apps[i] = 1;
    805e063c:	00002697          	auipc	a3,0x2
    805e0640:	9346e683          	lwu	a3,-1740(a3) # 805e1f70 <i>
    805e0644:	96d2                	add	a3,a3,s4
    805e0646:	4605                	li	a2,1
    805e0648:	00c68023          	sb	a2,0(a3)
                    if ((cfg_magic & CFG_APP_FLAG_ACTIVE) == 0) {
    805e064c:	000d2683          	lw	a3,0(s10)
    805e0650:	409c                	lw	a5,0(s1)
    805e0652:	8a85                	andi	a3,a3,1
    805e0654:	d2069fe3          	bnez	a3,805e0392 <main+0x37e>
                        LOG("NOT ");
    805e0658:	e80785e3          	beqz	a5,805e04e2 <main+0x4ce>
    805e065c:	601c                	ld	a5,0(s0)
    805e065e:	00001517          	auipc	a0,0x1
    805e0662:	2a250513          	addi	a0,a0,674 # 805e1900 <CSWTCH.3+0xf8>
    805e0666:	9782                	jalr	a5
    805e0668:	0c800513          	li	a0,200
    805e066c:	00001097          	auipc	ra,0x1
    805e0670:	a90080e7          	jalr	-1392(ra) # 805e10fc <usleep>
    805e0674:	409c                	lw	a5,0(s1)
    805e0676:	b3b1                	j	805e03c2 <main+0x3ae>
    for (uint32_t n = 5; n < (cfg_size+5); n++) {
    805e0678:	0056079b          	addiw	a5,a2,5
    805e067c:	4695                	li	a3,5
    805e067e:	5cf6fd63          	bleu	a5,a3,805e0c58 <main+0xc44>
    805e0682:	000c2683          	lw	a3,0(s8)
    uint32_t crc = 0xFFFFFFFF;
    805e0686:	57fd                	li	a5,-1
        byte = app_flash_ptr[cfg_address + n];
    805e0688:	54000537          	lui	a0,0x54000
    805e068c:	0056859b          	addiw	a1,a3,5
    805e0690:	9e2d                	addw	a2,a2,a1
    805e0692:	02059693          	slli	a3,a1,0x20
    805e0696:	9281                	srli	a3,a3,0x20
    805e0698:	96aa                	add	a3,a3,a0
    805e069a:	0006c683          	lbu	a3,0(a3)
    805e069e:	2585                	addiw	a1,a1,1
        crc = crc ^ byte;
    805e06a0:	8fb5                	xor	a5,a5,a3
            mask = -(crc & 1);
    805e06a2:	0017f693          	andi	a3,a5,1
    805e06a6:	40d006bb          	negw	a3,a3
            crc = (crc >> 1) ^ (0xEDB88320 & mask);
    805e06aa:	0166f6b3          	and	a3,a3,s6
    805e06ae:	0017d79b          	srliw	a5,a5,0x1
    805e06b2:	8fb5                	xor	a5,a5,a3
    805e06b4:	0007869b          	sext.w	a3,a5
            mask = -(crc & 1);
    805e06b8:	0016f793          	andi	a5,a3,1
    805e06bc:	40f007bb          	negw	a5,a5
            crc = (crc >> 1) ^ (0xEDB88320 & mask);
    805e06c0:	0016d69b          	srliw	a3,a3,0x1
    805e06c4:	0167f7b3          	and	a5,a5,s6
    805e06c8:	8fb5                	xor	a5,a5,a3
    805e06ca:	2781                	sext.w	a5,a5
            mask = -(crc & 1);
    805e06cc:	0017f693          	andi	a3,a5,1
    805e06d0:	40d006bb          	negw	a3,a3
            crc = (crc >> 1) ^ (0xEDB88320 & mask);
    805e06d4:	0017d79b          	srliw	a5,a5,0x1
    805e06d8:	0166f6b3          	and	a3,a3,s6
    805e06dc:	8ebd                	xor	a3,a3,a5
    805e06de:	2681                	sext.w	a3,a3
            mask = -(crc & 1);
    805e06e0:	0016f793          	andi	a5,a3,1
    805e06e4:	40f007bb          	negw	a5,a5
            crc = (crc >> 1) ^ (0xEDB88320 & mask);
    805e06e8:	0016d69b          	srliw	a3,a3,0x1
    805e06ec:	0167f7b3          	and	a5,a5,s6
    805e06f0:	8fb5                	xor	a5,a5,a3
    805e06f2:	2781                	sext.w	a5,a5
            mask = -(crc & 1);
    805e06f4:	0017f693          	andi	a3,a5,1
    805e06f8:	40d006bb          	negw	a3,a3
            crc = (crc >> 1) ^ (0xEDB88320 & mask);
    805e06fc:	0017d79b          	srliw	a5,a5,0x1
    805e0700:	0166f6b3          	and	a3,a3,s6
    805e0704:	8ebd                	xor	a3,a3,a5
    805e0706:	2681                	sext.w	a3,a3
            mask = -(crc & 1);
    805e0708:	0016f793          	andi	a5,a3,1
    805e070c:	40f007bb          	negw	a5,a5
            crc = (crc >> 1) ^ (0xEDB88320 & mask);
    805e0710:	0016d69b          	srliw	a3,a3,0x1
    805e0714:	0167f7b3          	and	a5,a5,s6
    805e0718:	8fb5                	xor	a5,a5,a3
    805e071a:	2781                	sext.w	a5,a5
            mask = -(crc & 1);
    805e071c:	0017f693          	andi	a3,a5,1
    805e0720:	40d006bb          	negw	a3,a3
            crc = (crc >> 1) ^ (0xEDB88320 & mask);
    805e0724:	0017d79b          	srliw	a5,a5,0x1
    805e0728:	0166f6b3          	and	a3,a3,s6
    805e072c:	8ebd                	xor	a3,a3,a5
    805e072e:	2681                	sext.w	a3,a3
            mask = -(crc & 1);
    805e0730:	0016f793          	andi	a5,a3,1
    805e0734:	40f007bb          	negw	a5,a5
            crc = (crc >> 1) ^ (0xEDB88320 & mask);
    805e0738:	0016d69b          	srliw	a3,a3,0x1
    805e073c:	0167f7b3          	and	a5,a5,s6
    805e0740:	8fb5                	xor	a5,a5,a3
    805e0742:	2781                	sext.w	a5,a5
    for (uint32_t n = 5; n < (cfg_size+5); n++) {
    805e0744:	f4c597e3          	bne	a1,a2,805e0692 <main+0x67e>
    if (crc32 != cfg_crc) {
    805e0748:	00001717          	auipc	a4,0x1
    805e074c:	7dc70713          	addi	a4,a4,2012 # 805e1f24 <cfg_crc>
    805e0750:	4314                	lw	a3,0(a4)
    805e0752:	fff7c793          	not	a5,a5
    805e0756:	eaf685e3          	beq	a3,a5,805e0600 <main+0x5ec>
        LOG("CRC32 error, ");
    805e075a:	409c                	lw	a5,0(s1)
    805e075c:	d80783e3          	beqz	a5,805e04e2 <main+0x4ce>
    805e0760:	601c                	ld	a5,0(s0)
    805e0762:	00001517          	auipc	a0,0x1
    805e0766:	15650513          	addi	a0,a0,342 # 805e18b8 <CSWTCH.3+0xb0>
    805e076a:	9782                	jalr	a5
    805e076c:	0c800513          	li	a0,200
    805e0770:	00001097          	auipc	ra,0x1
    805e0774:	98c080e7          	jalr	-1652(ra) # 805e10fc <usleep>
    805e0778:	b509                	j	805e057a <main+0x566>
        return app_sha256();
    805e077a:	00000097          	auipc	ra,0x0
    805e077e:	7f0080e7          	jalr	2032(ra) # 805e0f6a <app_sha256>
    805e0782:	2501                	sext.w	a0,a0
                        if (app_check() == 0) {
    805e0784:	e6051ee3          	bnez	a0,805e0600 <main+0x5ec>
    805e0788:	bbcd                	j	805e057a <main+0x566>
    for (boot_entry = 0; boot_entry < BOOT_CONFIG_ITEMS; boot_entry++) {
    805e078a:	478d                	li	a5,3
    805e078c:	00001717          	auipc	a4,0x1
    805e0790:	38f72623          	sw	a5,908(a4) # 805e1b18 <boot_entry>
        }
        else {
            LOG("\n* No app found, loading default\n");
        }
    }
    else if (boot_pin == 0) {
    805e0794:	00001797          	auipc	a5,0x1
    805e0798:	38878793          	addi	a5,a5,904 # 805e1b1c <boot_pin>
    805e079c:	439c                	lw	a5,0(a5)
    805e079e:	20078263          	beqz	a5,805e09a2 <main+0x98e>
            LOG("%c\n\n", (char)char_in);
        }
    }

    // If default application is selected for load, get its size and check SHA hash
    if (app_flash_start == DEFAULT_APP_ADDR) {
    805e07a2:	000ba703          	lw	a4,0(s7)
    805e07a6:	67c1                	lui	a5,0x10
    805e07a8:	18f70a63          	beq	a4,a5,805e093c <main+0x928>
            }
        }
    }

    // === Copy the application code from flash to SRAM ===
    LOG("* Loading app from flash at 0x%08X (%u B)\n", app_flash_start, app_size);
    805e07ac:	409c                	lw	a5,0(s1)
    805e07ae:	00001917          	auipc	s2,0x1
    805e07b2:	35a90913          	addi	s2,s2,858 # 805e1b08 <app_size>
    805e07b6:	c38d                	beqz	a5,805e07d8 <main+0x7c4>
    805e07b8:	601c                	ld	a5,0(s0)
    805e07ba:	00092603          	lw	a2,0(s2)
    805e07be:	000ba583          	lw	a1,0(s7)
    805e07c2:	00001517          	auipc	a0,0x1
    805e07c6:	25e50513          	addi	a0,a0,606 # 805e1a20 <CSWTCH.3+0x218>
    805e07ca:	9782                	jalr	a5
    805e07cc:	0c800513          	li	a0,200
    805e07d0:	00001097          	auipc	ra,0x1
    805e07d4:	92c080e7          	jalr	-1748(ra) # 805e10fc <usleep>

    for (i=0; i < app_size; i++) {
    805e07d8:	00092603          	lw	a2,0(s2)
    805e07dc:	00001797          	auipc	a5,0x1
    805e07e0:	7807aa23          	sw	zero,1940(a5) # 805e1f70 <i>
    805e07e4:	c231                	beqz	a2,805e0828 <main+0x814>
    805e07e6:	4785                	li	a5,1
    805e07e8:	fff6071b          	addiw	a4,a2,-1
    805e07ec:	07fe                	slli	a5,a5,0x1f
    805e07ee:	1702                	slli	a4,a4,0x20
    805e07f0:	00178693          	addi	a3,a5,1
        app_sram_ptr[i] = app_flash_ptr[app_flash_start+i+5];
    805e07f4:	000ba583          	lw	a1,0(s7)
    805e07f8:	9301                	srli	a4,a4,0x20
    805e07fa:	9736                	add	a4,a4,a3
    805e07fc:	800006b7          	lui	a3,0x80000
    805e0800:	2695                	addiw	a3,a3,5
    805e0802:	9db5                	addw	a1,a1,a3
    805e0804:	54000537          	lui	a0,0x54000
    805e0808:	00f586bb          	addw	a3,a1,a5
    805e080c:	1682                	slli	a3,a3,0x20
    805e080e:	9281                	srli	a3,a3,0x20
    805e0810:	96aa                	add	a3,a3,a0
    805e0812:	0006c683          	lbu	a3,0(a3) # ffffffff80000000 <context+0xfffffffeffa1e008>
    805e0816:	0785                	addi	a5,a5,1
    805e0818:	fed78fa3          	sb	a3,-1(a5)
    for (i=0; i < app_size; i++) {
    805e081c:	fee796e3          	bne	a5,a4,805e0808 <main+0x7f4>
    805e0820:	00001797          	auipc	a5,0x1
    805e0824:	74c7a823          	sw	a2,1872(a5) # 805e1f70 <i>
    }

    // === Start the application ===
    LOG("* Starting at 0x%08X ...\n\n", app_start);
    805e0828:	409c                	lw	a5,0(s1)
    805e082a:	cf99                	beqz	a5,805e0848 <main+0x834>
    805e082c:	601c                	ld	a5,0(s0)
    805e082e:	4585                	li	a1,1
    805e0830:	05fe                	slli	a1,a1,0x1f
    805e0832:	00001517          	auipc	a0,0x1
    805e0836:	21e50513          	addi	a0,a0,542 # 805e1a50 <CSWTCH.3+0x248>
    805e083a:	9782                	jalr	a5
    805e083c:	0c800513          	li	a0,200
    805e0840:	00001097          	auipc	ra,0x1
    805e0844:	8bc080e7          	jalr	-1860(ra) # 805e10fc <usleep>
    usleep(1000);
    805e0848:	3e800513          	li	a0,1000
    805e084c:	00001097          	auipc	ra,0x1
    805e0850:	8b0080e7          	jalr	-1872(ra) # 805e10fc <usleep>

    // Disable XIP mode
    sysctl->peri.spi3_xip_en = 0;
    805e0854:	504406b7          	lui	a3,0x50440
    805e0858:	4ebc                	lw	a5,88(a3)
    805e085a:	7761                	lui	a4,0xffff8
    805e085c:	177d                	addi	a4,a4,-1
    805e085e:	8ff9                	and	a5,a5,a4
    805e0860:	cebc                	sw	a5,88(a3)
    /*
     * each core has separate instruction cache
     * we must clear it before continuing
    */

    core1_sync = 1;
    805e0862:	4785                	li	a5,1
    805e0864:	00001717          	auipc	a4,0x1
    805e0868:	6ef72423          	sw	a5,1768(a4) # 805e1f4c <core1_sync>
    asm("fence");   // D-Cache; this may not be necessary, but it looks it doesn't hurt if it is executed
    805e086c:	0ff0000f          	fence
    asm("fence.i"); // I-Cache
    805e0870:	0000100f          	fence.i
    asm ("jr %0" : : "r"(app_start));
    805e0874:	4785                	li	a5,1
    805e0876:	07fe                	slli	a5,a5,0x1f
    805e0878:	8782                	jr	a5

    // This should never be reached!
    LOG("\nERROR, SYSTEM HALTED\n");
    805e087a:	409c                	lw	a5,0(s1)
    805e087c:	cf89                	beqz	a5,805e0896 <main+0x882>
    805e087e:	601c                	ld	a5,0(s0)
    805e0880:	00001517          	auipc	a0,0x1
    805e0884:	1f050513          	addi	a0,a0,496 # 805e1a70 <CSWTCH.3+0x268>
    805e0888:	9782                	jalr	a5
    805e088a:	0c800513          	li	a0,200
    805e088e:	00001097          	auipc	ra,0x1
    805e0892:	86e080e7          	jalr	-1938(ra) # 805e10fc <usleep>
    while (1) {
        asm ("nop");
    805e0896:	0001                	nop
    805e0898:	0001                	nop
    805e089a:	bff5                	j	805e0896 <main+0x882>
        fpioa_set_function(BOOT_PIN, FUNC_GPIOHS2);
    805e089c:	45e9                	li	a1,26
    805e089e:	4549                	li	a0,18
    805e08a0:	00000097          	auipc	ra,0x0
    805e08a4:	4d6080e7          	jalr	1238(ra) # 805e0d76 <fpioa_set_function>
        gpiohs_set_drive_mode(GPIO_KEY, GPIO_DM_INPUT_PULL_UP);
    805e08a8:	4589                	li	a1,2
    805e08aa:	4509                	li	a0,2
    805e08ac:	00000097          	auipc	ra,0x0
    805e08b0:	5d0080e7          	jalr	1488(ra) # 805e0e7c <gpiohs_set_drive_mode>
        usleep(1000);
    805e08b4:	3e800513          	li	a0,1000
    805e08b8:	00001097          	auipc	ra,0x1
    805e08bc:	844080e7          	jalr	-1980(ra) # 805e10fc <usleep>
        boot_pin = gpiohs_get_pin(GPIO_KEY);
    805e08c0:	4509                	li	a0,2
    805e08c2:	00000097          	auipc	ra,0x0
    805e08c6:	64e080e7          	jalr	1614(ra) # 805e0f10 <gpiohs_get_pin>
    LOG("\nK210 bootloader by LoBo v.1.4.2\n\n");
    805e08ca:	409c                	lw	a5,0(s1)
        boot_pin = gpiohs_get_pin(GPIO_KEY);
    805e08cc:	00001717          	auipc	a4,0x1
    805e08d0:	24a72823          	sw	a0,592(a4) # 805e1b1c <boot_pin>
    LOG("\nK210 bootloader by LoBo v.1.4.2\n\n");
    805e08d4:	00001417          	auipc	s0,0x1
    805e08d8:	6f443403          	ld	s0,1780(s0) # 805e1fc8 <__TMC_END__+0x8>
    805e08dc:	fa078f63          	beqz	a5,805e009a <main+0x86>
    805e08e0:	601c                	ld	a5,0(s0)
    805e08e2:	00001517          	auipc	a0,0x1
    805e08e6:	f4650513          	addi	a0,a0,-186 # 805e1828 <CSWTCH.3+0x20>
    805e08ea:	9782                	jalr	a5
    805e08ec:	0c800513          	li	a0,200
    805e08f0:	00001097          	auipc	ra,0x1
    805e08f4:	80c080e7          	jalr	-2036(ra) # 805e10fc <usleep>
    LOG("* Find applications in MAIN parameters\n");
    805e08f8:	409c                	lw	a5,0(s1)
    805e08fa:	fa078063          	beqz	a5,805e009a <main+0x86>
    805e08fe:	601c                	ld	a5,0(s0)
    805e0900:	00001517          	auipc	a0,0x1
    805e0904:	f5050513          	addi	a0,a0,-176 # 805e1850 <CSWTCH.3+0x48>
    805e0908:	9782                	jalr	a5
    805e090a:	0c800513          	li	a0,200
    805e090e:	00000097          	auipc	ra,0x0
    805e0912:	7ee080e7          	jalr	2030(ra) # 805e10fc <usleep>
    805e0916:	f84ff06f          	j	805e009a <main+0x86>
    for (boot_entry = 0; boot_entry < BOOT_CONFIG_ITEMS; boot_entry++) {
    805e091a:	4789                	li	a5,2
    805e091c:	bd85                	j	805e078c <main+0x778>
                            LOG("ACTIVE\n");
    805e091e:	ac078ae3          	beqz	a5,805e03f2 <main+0x3de>
    805e0922:	601c                	ld	a5,0(s0)
    805e0924:	00001517          	auipc	a0,0x1
    805e0928:	fe450513          	addi	a0,a0,-28 # 805e1908 <CSWTCH.3+0x100>
    805e092c:	9782                	jalr	a5
    805e092e:	0c800513          	li	a0,200
    805e0932:	00000097          	auipc	ra,0x0
    805e0936:	7ca080e7          	jalr	1994(ra) # 805e10fc <usleep>
    805e093a:	bc65                	j	805e03f2 <main+0x3de>
        app_size = flash2uint32(app_flash_start+1); // get app size
    805e093c:	6941                	lui	s2,0x10
        key = 1;
    805e093e:	4785                	li	a5,1
        app_size = flash2uint32(app_flash_start+1); // get app size
    805e0940:	00190513          	addi	a0,s2,1 # 10001 <_start-0x805cffff>
        key = 1;
    805e0944:	00001717          	auipc	a4,0x1
    805e0948:	62f70823          	sb	a5,1584(a4) # 805e1f74 <key>
        app_size = flash2uint32(app_flash_start+1); // get app size
    805e094c:	00000097          	auipc	ra,0x0
    805e0950:	5d2080e7          	jalr	1490(ra) # 805e0f1e <flash2uint32>
    805e0954:	2501                	sext.w	a0,a0
    805e0956:	00001797          	auipc	a5,0x1
    805e095a:	1aa7a923          	sw	a0,434(a5) # 805e1b08 <app_size>
        if ((app_size >= MIN_APP_FLASH_SIZE) && (app_size <= MAX_APP_FLASH_SIZE)) {
    805e095e:	77f1                	lui	a5,0xffffc
    805e0960:	9fa9                	addw	a5,a5,a0
    805e0962:	002fc737          	lui	a4,0x2fc
    805e0966:	14f76a63          	bltu	a4,a5,805e0aba <main+0xaa6>
            if ((boot_entry < BOOT_CONFIG_ITEMS) || app_sha256()) {
    805e096a:	00001797          	auipc	a5,0x1
    805e096e:	1ae78793          	addi	a5,a5,430 # 805e1b18 <boot_entry>
    805e0972:	4398                	lw	a4,0(a5)
            cfg_size = app_size;
    805e0974:	00001797          	auipc	a5,0x1
    805e0978:	5ca7a623          	sw	a0,1484(a5) # 805e1f40 <cfg_size>
            cfg_address = app_flash_start;
    805e097c:	00001797          	auipc	a5,0x1
    805e0980:	5b27a223          	sw	s2,1444(a5) # 805e1f20 <cfg_address>
            if ((boot_entry < BOOT_CONFIG_ITEMS) || app_sha256()) {
    805e0984:	479d                	li	a5,7
    805e0986:	10e7ed63          	bltu	a5,a4,805e0aa0 <main+0xa8c>
                key = 0;
    805e098a:	00001797          	auipc	a5,0x1
    805e098e:	5e078523          	sb	zero,1514(a5) # 805e1f74 <key>
        if (key) {
    805e0992:	bd29                	j	805e07ac <main+0x798>
    else if (boot_pin == 0) {
    805e0994:	00001797          	auipc	a5,0x1
    805e0998:	18878793          	addi	a5,a5,392 # 805e1b1c <boot_pin>
    805e099c:	439c                	lw	a5,0(a5)
    805e099e:	e00797e3          	bnez	a5,805e07ac <main+0x798>
        boot_pin = gpiohs_get_pin(GPIO_KEY);
    805e09a2:	4509                	li	a0,2
    805e09a4:	00000097          	auipc	ra,0x0
    805e09a8:	56c080e7          	jalr	1388(ra) # 805e0f10 <gpiohs_get_pin>
    805e09ac:	0005091b          	sext.w	s2,a0
    805e09b0:	00001797          	auipc	a5,0x1
    805e09b4:	1727a623          	sw	s2,364(a5) # 805e1b1c <boot_pin>
        if (boot_pin == 0) {
    805e09b8:	de0915e3          	bnez	s2,805e07a2 <main+0x78e>
            LOG("\nSelect the application number to load [");
    805e09bc:	409c                	lw	a5,0(s1)
    805e09be:	28079f63          	bnez	a5,805e0c5c <main+0xc48>
            for (i = 0; i < BOOT_CONFIG_ITEMS; i++) {
    805e09c2:	00001797          	auipc	a5,0x1
    805e09c6:	5a07a723          	sw	zero,1454(a5) # 805e1f70 <i>
                    LOG(" %u,", i);
    805e09ca:	00001c17          	auipc	s8,0x1
    805e09ce:	feec0c13          	addi	s8,s8,-18 # 805e19b8 <CSWTCH.3+0x1b0>
            for (i = 0; i < BOOT_CONFIG_ITEMS; i++) {
    805e09d2:	4b1d                	li	s6,7
                if (available_apps[i]) {
    805e09d4:	02091793          	slli	a5,s2,0x20
    805e09d8:	9381                	srli	a5,a5,0x20
    805e09da:	97d2                	add	a5,a5,s4
    805e09dc:	0007c783          	lbu	a5,0(a5)
    805e09e0:	cf89                	beqz	a5,805e09fa <main+0x9e6>
                    LOG(" %u,", i);
    805e09e2:	409c                	lw	a5,0(s1)
    805e09e4:	85ca                	mv	a1,s2
    805e09e6:	8562                	mv	a0,s8
    805e09e8:	cb89                	beqz	a5,805e09fa <main+0x9e6>
    805e09ea:	601c                	ld	a5,0(s0)
    805e09ec:	9782                	jalr	a5
    805e09ee:	0c800513          	li	a0,200
    805e09f2:	00000097          	auipc	ra,0x0
    805e09f6:	70a080e7          	jalr	1802(ra) # 805e10fc <usleep>
            for (i = 0; i < BOOT_CONFIG_ITEMS; i++) {
    805e09fa:	000aa783          	lw	a5,0(s5)
    805e09fe:	0017891b          	addiw	s2,a5,1
    805e0a02:	00001717          	auipc	a4,0x1
    805e0a06:	57272723          	sw	s2,1390(a4) # 805e1f70 <i>
    805e0a0a:	fd2b75e3          	bleu	s2,s6,805e09d4 <main+0x9c0>
            LOG(" d=default ] ? ");
    805e0a0e:	409c                	lw	a5,0(s1)
    805e0a10:	22079763          	bnez	a5,805e0c3e <main+0xc2a>
    805e0a14:	00001d17          	auipc	s10,0x1
    805e0a18:	5c4d3d03          	ld	s10,1476(s10) # 805e1fd8 <__TMC_END__+0x18>
                if ((char_in == 'd') || (char_in == 'D')) {
    805e0a1c:	04400c93          	li	s9,68
                    if ((char_in >= 0) && (char_in < BOOT_CONFIG_ITEMS)) {
    805e0a20:	4c1d                	li	s8,7
                    LOG("%c? ", char_in);
    805e0a22:	00001b17          	auipc	s6,0x1
    805e0a26:	faeb0b13          	addi	s6,s6,-82 # 805e19d0 <CSWTCH.3+0x1c8>
    805e0a2a:	a00d                	j	805e0a4c <main+0xa38>
                    char_in -= 0x30;
    805e0a2c:	00001797          	auipc	a5,0x1
    805e0a30:	5157ac23          	sw	s5,1304(a5) # 805e1f44 <char_in>
                    if ((char_in >= 0) && (char_in < BOOT_CONFIG_ITEMS)) {
    805e0a34:	015c6663          	bltu	s8,s5,805e0a40 <main+0xa2c>
                        if (available_apps[char_in]) {
    805e0a38:	0006c783          	lbu	a5,0(a3) # 50440000 <_start-0x301a0000>
    805e0a3c:	10079363          	bnez	a5,805e0b42 <main+0xb2e>
                    LOG("%c? ", char_in);
    805e0a40:	409c                	lw	a5,0(s1)
                    char_in += 0x30;
    805e0a42:	00001717          	auipc	a4,0x1
    805e0a46:	51272123          	sw	s2,1282(a4) # 805e1f44 <char_in>
                    LOG("%c? ", char_in);
    805e0a4a:	e3ed                	bnez	a5,805e0b2c <main+0xb18>
                char_in = rom_getchar();
    805e0a4c:	000d3783          	ld	a5,0(s10)
    805e0a50:	9782                	jalr	a5
                if ((char_in == 'd') || (char_in == 'D')) {
    805e0a52:	fdf57793          	andi	a5,a0,-33
                    char_in -= 0x30;
    805e0a56:	fd050a9b          	addiw	s5,a0,-48
                char_in = rom_getchar();
    805e0a5a:	00001697          	auipc	a3,0x1
    805e0a5e:	4ea6a523          	sw	a0,1258(a3) # 805e1f44 <char_in>
                if ((char_in == 'd') || (char_in == 'D')) {
    805e0a62:	2781                	sext.w	a5,a5
                char_in = rom_getchar();
    805e0a64:	892a                	mv	s2,a0
                        if (available_apps[char_in]) {
    805e0a66:	015a06b3          	add	a3,s4,s5
                if ((char_in == 'd') || (char_in == 'D')) {
    805e0a6a:	fd9791e3          	bne	a5,s9,805e0a2c <main+0xa18>
            LOG("%c\n\n", (char)char_in);
    805e0a6e:	409c                	lw	a5,0(s1)
                    app_flash_start = DEFAULT_APP_ADDR;
    805e0a70:	6741                	lui	a4,0x10
    805e0a72:	00001697          	auipc	a3,0x1
    805e0a76:	06e6a723          	sw	a4,110(a3) # 805e1ae0 <app_flash_start>
            LOG("%c\n\n", (char)char_in);
    805e0a7a:	ec0781e3          	beqz	a5,805e093c <main+0x928>
    805e0a7e:	601c                	ld	a5,0(s0)
    805e0a80:	00001597          	auipc	a1,0x1
    805e0a84:	4c45c583          	lbu	a1,1220(a1) # 805e1f44 <char_in>
    805e0a88:	00001517          	auipc	a0,0x1
    805e0a8c:	f5050513          	addi	a0,a0,-176 # 805e19d8 <CSWTCH.3+0x1d0>
    805e0a90:	9782                	jalr	a5
    805e0a92:	0c800513          	li	a0,200
    805e0a96:	00000097          	auipc	ra,0x0
    805e0a9a:	666080e7          	jalr	1638(ra) # 805e10fc <usleep>
    805e0a9e:	b311                	j	805e07a2 <main+0x78e>
            if ((boot_entry < BOOT_CONFIG_ITEMS) || app_sha256()) {
    805e0aa0:	00000097          	auipc	ra,0x0
    805e0aa4:	4ca080e7          	jalr	1226(ra) # 805e0f6a <app_sha256>
    805e0aa8:	2501                	sext.w	a0,a0
    805e0aaa:	ee0510e3          	bnez	a0,805e098a <main+0x976>
        if (key) {
    805e0aae:	00001797          	auipc	a5,0x1
    805e0ab2:	4c67c783          	lbu	a5,1222(a5) # 805e1f74 <key>
    805e0ab6:	ce078be3          	beqz	a5,805e07ac <main+0x798>
            LOG("\n* Default application check failed!\n");
    805e0aba:	601c                	ld	a5,0(s0)
            print_enabled = 1;
    805e0abc:	4705                	li	a4,1
            LOG("\n* Default application check failed!\n");
    805e0abe:	00001517          	auipc	a0,0x1
    805e0ac2:	f2250513          	addi	a0,a0,-222 # 805e19e0 <CSWTCH.3+0x1d8>
            print_enabled = 1;
    805e0ac6:	00001697          	auipc	a3,0x1
    805e0aca:	4ae6a923          	sw	a4,1202(a3) # 805e1f78 <print_enabled>
            LOG("\n* Default application check failed!\n");
    805e0ace:	9782                	jalr	a5
    805e0ad0:	0c800513          	li	a0,200
    805e0ad4:	00000097          	auipc	ra,0x0
    805e0ad8:	628080e7          	jalr	1576(ra) # 805e10fc <usleep>
            LOG("* SYSTEM HALTED\n");
    805e0adc:	409c                	lw	a5,0(s1)
    805e0ade:	cf89                	beqz	a5,805e0af8 <main+0xae4>
    805e0ae0:	601c                	ld	a5,0(s0)
    805e0ae2:	00001517          	auipc	a0,0x1
    805e0ae6:	f2650513          	addi	a0,a0,-218 # 805e1a08 <CSWTCH.3+0x200>
    805e0aea:	9782                	jalr	a5
    805e0aec:	0c800513          	li	a0,200
    805e0af0:	00000097          	auipc	ra,0x0
    805e0af4:	60c080e7          	jalr	1548(ra) # 805e10fc <usleep>
                asm ("nop");
    805e0af8:	0001                	nop
    805e0afa:	0001                	nop
    805e0afc:	bff5                	j	805e0af8 <main+0xae4>
    for (boot_entry = 0; boot_entry < BOOT_CONFIG_ITEMS; boot_entry++) {
    805e0afe:	479d                	li	a5,7
    805e0b00:	b171                	j	805e078c <main+0x778>
    805e0b02:	4799                	li	a5,6
    805e0b04:	b161                	j	805e078c <main+0x778>
    805e0b06:	4795                	li	a5,5
    805e0b08:	b151                	j	805e078c <main+0x778>
    805e0b0a:	4791                	li	a5,4
    805e0b0c:	b141                	j	805e078c <main+0x778>
            LOG("\n* No app found, loading default\n");
    805e0b0e:	e20787e3          	beqz	a5,805e093c <main+0x928>
    805e0b12:	601c                	ld	a5,0(s0)
    805e0b14:	00001517          	auipc	a0,0x1
    805e0b18:	e4c50513          	addi	a0,a0,-436 # 805e1960 <CSWTCH.3+0x158>
    805e0b1c:	9782                	jalr	a5
    805e0b1e:	0c800513          	li	a0,200
    805e0b22:	00000097          	auipc	ra,0x0
    805e0b26:	5da080e7          	jalr	1498(ra) # 805e10fc <usleep>
    805e0b2a:	b9a5                	j	805e07a2 <main+0x78e>
                    LOG("%c? ", char_in);
    805e0b2c:	601c                	ld	a5,0(s0)
    805e0b2e:	85ca                	mv	a1,s2
    805e0b30:	855a                	mv	a0,s6
    805e0b32:	9782                	jalr	a5
    805e0b34:	0c800513          	li	a0,200
    805e0b38:	00000097          	auipc	ra,0x0
    805e0b3c:	5c4080e7          	jalr	1476(ra) # 805e10fc <usleep>
    805e0b40:	b731                	j	805e0a4c <main+0xa38>
    offset = (i*8) + (cfg_offset / 4); // 32bit offset in current config sector
    805e0b42:	0009a703          	lw	a4,0(s3)
    805e0b46:	003a979b          	slliw	a5,s5,0x3
    offset = (i*32) + cfg_offset + 0x10; // 8bit offset in current config sector
    805e0b4a:	005a969b          	slliw	a3,s5,0x5
    offset = (i*8) + (cfg_offset / 4); // 32bit offset in current config sector
    805e0b4e:	0027561b          	srliw	a2,a4,0x2
    805e0b52:	9fb1                	addw	a5,a5,a2
    cfg_address = cfg_flash_ptr[offset + 1];
    805e0b54:	0017881b          	addiw	a6,a5,1
    cfg_size = cfg_flash_ptr[offset + 2];
    805e0b58:	0027851b          	addiw	a0,a5,2
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e0b5c:	0037861b          	addiw	a2,a5,3
    offset = (i*32) + cfg_offset + 0x10; // 8bit offset in current config sector
    805e0b60:	2741                	addiw	a4,a4,16
    805e0b62:	9f35                	addw	a4,a4,a3
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0b64:	1782                	slli	a5,a5,0x20
    cfg_address = cfg_flash_ptr[offset + 1];
    805e0b66:	1802                	slli	a6,a6,0x20
    cfg_size = cfg_flash_ptr[offset + 2];
    805e0b68:	1502                	slli	a0,a0,0x20
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e0b6a:	1602                	slli	a2,a2,0x20
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0b6c:	9381                	srli	a5,a5,0x20
    cfg_address = cfg_flash_ptr[offset + 1];
    805e0b6e:	02085813          	srli	a6,a6,0x20
    cfg_size = cfg_flash_ptr[offset + 2];
    805e0b72:	9101                	srli	a0,a0,0x20
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e0b74:	9201                	srli	a2,a2,0x20
    key = cfg_flash_bptr[offset];        // dummy read needed to switch to 8bit XiP read
    805e0b76:	02071593          	slli	a1,a4,0x20
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0b7a:	540046b7          	lui	a3,0x54004
    key = cfg_flash_bptr[offset];        // dummy read needed to switch to 8bit XiP read
    805e0b7e:	9181                	srli	a1,a1,0x20
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0b80:	078a                	slli	a5,a5,0x2
    cfg_address = cfg_flash_ptr[offset + 1];
    805e0b82:	080a                	slli	a6,a6,0x2
    cfg_size = cfg_flash_ptr[offset + 2];
    805e0b84:	050a                	slli	a0,a0,0x2
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e0b86:	060a                	slli	a2,a2,0x2
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0b88:	97b6                	add	a5,a5,a3
    cfg_address = cfg_flash_ptr[offset + 1];
    805e0b8a:	9836                	add	a6,a6,a3
    cfg_size = cfg_flash_ptr[offset + 2];
    805e0b8c:	9536                	add	a0,a0,a3
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e0b8e:	9636                	add	a2,a2,a3
    key = cfg_flash_bptr[offset];        // dummy read needed to switch to 8bit XiP read
    805e0b90:	96ae                	add	a3,a3,a1
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0b92:	0007a883          	lw	a7,0(a5)
    cfg_size = cfg_flash_ptr[offset + 2];
    805e0b96:	410c                	lw	a1,0(a0)
    key = cfg_flash_bptr[offset];        // dummy read needed to switch to 8bit XiP read
    805e0b98:	0006c783          	lbu	a5,0(a3) # 54004000 <_start-0x2c5dc000>
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e0b9c:	4210                	lw	a2,0(a2)
    cfg_address = cfg_flash_ptr[offset + 1];
    805e0b9e:	00082983          	lw	s3,0(a6) # 54000000 <_start-0x2c5e0000>
    cfg_size = cfg_flash_ptr[offset + 2];
    805e0ba2:	00001697          	auipc	a3,0x1
    805e0ba6:	38b6af23          	sw	a1,926(a3) # 805e1f40 <cfg_size>
    cfg_crc = cfg_flash_ptr[offset + 3];
    805e0baa:	00001697          	auipc	a3,0x1
    805e0bae:	36c6ad23          	sw	a2,890(a3) # 805e1f24 <cfg_crc>
    key = cfg_flash_bptr[offset];        // dummy read needed to switch to 8bit XiP read
    805e0bb2:	00001697          	auipc	a3,0x1
    805e0bb6:	3cf68123          	sb	a5,962(a3) # 805e1f74 <key>
    cfg_magic = cfg_flash_ptr[offset + 0];
    805e0bba:	00001697          	auipc	a3,0x1
    805e0bbe:	3716af23          	sw	a7,894(a3) # 805e1f38 <cfg_magic>
    cfg_address = cfg_flash_ptr[offset + 1];
    805e0bc2:	00001697          	auipc	a3,0x1
    805e0bc6:	3536af23          	sw	s3,862(a3) # 805e1f20 <cfg_address>
    key = cfg_flash_bptr[offset];        // dummy read needed to switch to 8bit XiP read
    805e0bca:	4781                	li	a5,0
        cfg_info[n] = cfg_flash_bptr[offset + n];
    805e0bcc:	540045b7          	lui	a1,0x54004
    for (int n=0; n<16; n++) {
    805e0bd0:	4641                	li	a2,16
        cfg_info[n] = cfg_flash_bptr[offset + n];
    805e0bd2:	00e786bb          	addw	a3,a5,a4
    805e0bd6:	1682                	slli	a3,a3,0x20
    805e0bd8:	9281                	srli	a3,a3,0x20
    805e0bda:	96ae                	add	a3,a3,a1
    805e0bdc:	0006c503          	lbu	a0,0(a3)
    805e0be0:	00001697          	auipc	a3,0x1
    805e0be4:	34868693          	addi	a3,a3,840 # 805e1f28 <cfg_info>
    805e0be8:	96be                	add	a3,a3,a5
    805e0bea:	00a68023          	sb	a0,0(a3)
    805e0bee:	0785                	addi	a5,a5,1
    for (int n=0; n<16; n++) {
    805e0bf0:	fec791e3          	bne	a5,a2,805e0bd2 <main+0xbbe>
                            app_size = flash2uint32(cfg_address+1);
    805e0bf4:	0019851b          	addiw	a0,s3,1
    cfg_info[15] = 0;
    805e0bf8:	00001797          	auipc	a5,0x1
    805e0bfc:	32078fa3          	sb	zero,831(a5) # 805e1f37 <cfg_info+0xf>
                            app_size = flash2uint32(cfg_address+1);
    805e0c00:	00000097          	auipc	ra,0x0
    805e0c04:	31e080e7          	jalr	798(ra) # 805e0f1e <flash2uint32>
            LOG("%c\n\n", (char)char_in);
    805e0c08:	409c                	lw	a5,0(s1)
                            app_size = flash2uint32(cfg_address+1);
    805e0c0a:	00001717          	auipc	a4,0x1
    805e0c0e:	eea72f23          	sw	a0,-258(a4) # 805e1b08 <app_size>
                            app_flash_start = cfg_address;
    805e0c12:	00001717          	auipc	a4,0x1
    805e0c16:	ed372723          	sw	s3,-306(a4) # 805e1ae0 <app_flash_start>
                            boot_entry = char_in;
    805e0c1a:	00001717          	auipc	a4,0x1
    805e0c1e:	ef572f23          	sw	s5,-258(a4) # 805e1b18 <boot_entry>
                            char_in += 0x30;
    805e0c22:	00001717          	auipc	a4,0x1
    805e0c26:	33272123          	sw	s2,802(a4) # 805e1f44 <char_in>
            LOG("%c\n\n", (char)char_in);
    805e0c2a:	e4079ae3          	bnez	a5,805e0a7e <main+0xa6a>
    if (app_flash_start == DEFAULT_APP_ADDR) {
    805e0c2e:	67c1                	lui	a5,0x10
    805e0c30:	d0f986e3          	beq	s3,a5,805e093c <main+0x928>
    805e0c34:	00001917          	auipc	s2,0x1
    805e0c38:	ed490913          	addi	s2,s2,-300 # 805e1b08 <app_size>
    805e0c3c:	be71                	j	805e07d8 <main+0x7c4>
            LOG(" d=default ] ? ");
    805e0c3e:	601c                	ld	a5,0(s0)
    805e0c40:	00001517          	auipc	a0,0x1
    805e0c44:	d8050513          	addi	a0,a0,-640 # 805e19c0 <CSWTCH.3+0x1b8>
    805e0c48:	9782                	jalr	a5
    805e0c4a:	0c800513          	li	a0,200
    805e0c4e:	00000097          	auipc	ra,0x0
    805e0c52:	4ae080e7          	jalr	1198(ra) # 805e10fc <usleep>
    805e0c56:	bb7d                	j	805e0a14 <main+0xa00>
    uint32_t crc = 0xFFFFFFFF;
    805e0c58:	57fd                	li	a5,-1
    805e0c5a:	b4fd                	j	805e0748 <main+0x734>
            LOG("\nSelect the application number to load [");
    805e0c5c:	601c                	ld	a5,0(s0)
    805e0c5e:	00001517          	auipc	a0,0x1
    805e0c62:	d2a50513          	addi	a0,a0,-726 # 805e1988 <CSWTCH.3+0x180>
    805e0c66:	9782                	jalr	a5
    805e0c68:	0c800513          	li	a0,200
    805e0c6c:	00000097          	auipc	ra,0x0
    805e0c70:	490080e7          	jalr	1168(ra) # 805e10fc <usleep>
    805e0c74:	b3b9                	j	805e09c2 <main+0x9ae>

00000000805e0c76 <deregister_tm_clones>:
    805e0c76:	00001517          	auipc	a0,0x1
    805e0c7a:	34a50513          	addi	a0,a0,842 # 805e1fc0 <__TMC_END__>
    805e0c7e:	00001797          	auipc	a5,0x1
    805e0c82:	34278793          	addi	a5,a5,834 # 805e1fc0 <__TMC_END__>
    805e0c86:	00a78963          	beq	a5,a0,805e0c98 <deregister_tm_clones+0x22>
    805e0c8a:	00000337          	lui	t1,0x0
    805e0c8e:	00030313          	mv	t1,t1
    805e0c92:	00030363          	beqz	t1,805e0c98 <deregister_tm_clones+0x22>
    805e0c96:	8302                	jr	t1
    805e0c98:	8082                	ret

00000000805e0c9a <__do_global_dtors_aux>:
    805e0c9a:	00001797          	auipc	a5,0x1
    805e0c9e:	3567c783          	lbu	a5,854(a5) # 805e1ff0 <completed.5485>
    805e0ca2:	ef85                	bnez	a5,805e0cda <__do_global_dtors_aux+0x40>
    805e0ca4:	1141                	addi	sp,sp,-16
    805e0ca6:	e406                	sd	ra,8(sp)
    805e0ca8:	00000097          	auipc	ra,0x0
    805e0cac:	fce080e7          	jalr	-50(ra) # 805e0c76 <deregister_tm_clones>
    805e0cb0:	000007b7          	lui	a5,0x0
    805e0cb4:	00078793          	mv	a5,a5
    805e0cb8:	cb89                	beqz	a5,805e0cca <__do_global_dtors_aux+0x30>
    805e0cba:	00001517          	auipc	a0,0x1
    805e0cbe:	e1650513          	addi	a0,a0,-490 # 805e1ad0 <__FRAME_END__>
    805e0cc2:	00000097          	auipc	ra,0x0
    805e0cc6:	000000e7          	jalr	zero # 0 <_start-0x805e0000>
    805e0cca:	60a2                	ld	ra,8(sp)
    805e0ccc:	4785                	li	a5,1
    805e0cce:	00001717          	auipc	a4,0x1
    805e0cd2:	32f70123          	sb	a5,802(a4) # 805e1ff0 <completed.5485>
    805e0cd6:	0141                	addi	sp,sp,16
    805e0cd8:	8082                	ret
    805e0cda:	8082                	ret

00000000805e0cdc <fpioa_set_io_pull>:
}

int fpioa_set_io_pull(int number, fpioa_pull_t pull)
{
    /* Check parameters */
    if(number < 0 || number >= FPIOA_NUM_IO || pull >= FPIOA_PULL_MAX)
    805e0cdc:	02f00793          	li	a5,47
    805e0ce0:	04a7ec63          	bltu	a5,a0,805e0d38 <fpioa_set_io_pull+0x5c>
    805e0ce4:	4789                	li	a5,2
    805e0ce6:	04b7e963          	bltu	a5,a1,805e0d38 <fpioa_set_io_pull+0x5c>
        return -1;

    /* Atomic read register */
    fpioa_io_config_t cfg = fpioa->io[number];
    805e0cea:	1582                	slli	a1,a1,0x20
    805e0cec:	9181                	srli	a1,a1,0x20
            break;
        default:
            break;
    }
    /* Atomic write register */
    fpioa->io[number] = cfg;
    805e0cee:	00000717          	auipc	a4,0x0
    805e0cf2:	6fa70713          	addi	a4,a4,1786 # 805e13e8 <CSWTCH.14>
    805e0cf6:	972e                	add	a4,a4,a1
    fpioa_io_config_t cfg = fpioa->io[number];
    805e0cf8:	502b07b7          	lui	a5,0x502b0
    805e0cfc:	050a                	slli	a0,a0,0x2
    805e0cfe:	953e                	add	a0,a0,a5
    fpioa->io[number] = cfg;
    805e0d00:	00074783          	lbu	a5,0(a4)
    805e0d04:	00000697          	auipc	a3,0x0
    805e0d08:	6ec68693          	addi	a3,a3,1772 # 805e13f0 <CSWTCH.15>
    805e0d0c:	95b6                	add	a1,a1,a3
    fpioa_io_config_t cfg = fpioa->io[number];
    805e0d0e:	4118                	lw	a4,0(a0)
    switch(pull)
    805e0d10:	0005c683          	lbu	a3,0(a1) # 54004000 <_start-0x2c5dc000>
    fpioa->io[number] = cfg;
    805e0d14:	8b85                	andi	a5,a5,1
    805e0d16:	0107961b          	slliw	a2,a5,0x10
    805e0d1a:	77c1                	lui	a5,0xffff0
    805e0d1c:	17fd                	addi	a5,a5,-1
    805e0d1e:	8ff9                	and	a5,a5,a4
    805e0d20:	0016f713          	andi	a4,a3,1
    805e0d24:	7681                	lui	a3,0xfffe0
    805e0d26:	8fd1                	or	a5,a5,a2
    805e0d28:	16fd                	addi	a3,a3,-1
    805e0d2a:	0117171b          	slliw	a4,a4,0x11
    805e0d2e:	8ff5                	and	a5,a5,a3
    805e0d30:	8fd9                	or	a5,a5,a4
    805e0d32:	c11c                	sw	a5,0(a0)
    return 0;
    805e0d34:	4501                	li	a0,0
    805e0d36:	8082                	ret
        return -1;
    805e0d38:	557d                	li	a0,-1
}
    805e0d3a:	8082                	ret

00000000805e0d3c <fpioa_set_function_raw>:
}

int fpioa_set_function_raw(int number, fpioa_function_t function)
{
    /* Check parameters */
    if(number < 0 || number >= FPIOA_NUM_IO || function < 0 || function >= FUNC_MAX)
    805e0d3c:	02f00793          	li	a5,47
    805e0d40:	02a7e963          	bltu	a5,a0,805e0d72 <fpioa_set_function_raw+0x36>
    805e0d44:	0ff00793          	li	a5,255
    805e0d48:	02b7e563          	bltu	a5,a1,805e0d72 <fpioa_set_function_raw+0x36>
        return -1;
    /* Atomic write register */
    fpioa->io[number] = (const fpioa_io_config_t){
        .ch_sel = function_config[function].ch_sel,
    805e0d4c:	1582                	slli	a1,a1,0x20
    805e0d4e:	00000797          	auipc	a5,0x0
    805e0d52:	6aa78793          	addi	a5,a5,1706 # 805e13f8 <function_config>
    805e0d56:	81f9                	srli	a1,a1,0x1e
    805e0d58:	95be                	add	a1,a1,a5
    805e0d5a:	419c                	lw	a5,0(a1)
    fpioa->io[number] = (const fpioa_io_config_t){
    805e0d5c:	00fc0737          	lui	a4,0xfc0
    805e0d60:	177d                	addi	a4,a4,-1
    805e0d62:	8f7d                	and	a4,a4,a5
    805e0d64:	050a                	slli	a0,a0,0x2
    805e0d66:	502b07b7          	lui	a5,0x502b0
    805e0d6a:	953e                	add	a0,a0,a5
    805e0d6c:	c118                	sw	a4,0(a0)
        .ie_inv = function_config[function].ie_inv,
        .di_inv = function_config[function].di_inv,
        .st = function_config[function].st,
        /* resv and pad_di do not need initialization */
    };
    return 0;
    805e0d6e:	4501                	li	a0,0
    805e0d70:	8082                	ret
        return -1;
    805e0d72:	557d                	li	a0,-1
}
    805e0d74:	8082                	ret

00000000805e0d76 <fpioa_set_function>:

int fpioa_set_function(int number, fpioa_function_t function)
{
    uint8_t index = 0;
    /* Check parameters */
    if(number < 0 || number >= FPIOA_NUM_IO || function < 0 || function >= FUNC_MAX)
    805e0d76:	02f00793          	li	a5,47
    805e0d7a:	08a7e063          	bltu	a5,a0,805e0dfa <fpioa_set_function+0x84>
{
    805e0d7e:	7179                	addi	sp,sp,-48
    805e0d80:	ec26                	sd	s1,24(sp)
    805e0d82:	f406                	sd	ra,40(sp)
    805e0d84:	f022                	sd	s0,32(sp)
    805e0d86:	e84a                	sd	s2,16(sp)
    805e0d88:	e44e                	sd	s3,8(sp)
    805e0d8a:	e052                	sd	s4,0(sp)
    if(number < 0 || number >= FPIOA_NUM_IO || function < 0 || function >= FUNC_MAX)
    805e0d8c:	0ff00793          	li	a5,255
    805e0d90:	84ae                	mv	s1,a1
    805e0d92:	06b7e663          	bltu	a5,a1,805e0dfe <fpioa_set_function+0x88>
        return -1;
    if(function == FUNC_RESV0)
    805e0d96:	07800793          	li	a5,120
    805e0d9a:	8a2a                	mv	s4,a0
    805e0d9c:	4401                	li	s0,0
        return 0;
    }
    /* Compare all IO */
    for(index = 0; index < FPIOA_NUM_IO; index++)
    {
        if((fpioa->io[index].ch_sel == function) && (index != number))
    805e0d9e:	502b09b7          	lui	s3,0x502b0
    for(index = 0; index < FPIOA_NUM_IO; index++)
    805e0da2:	03000913          	li	s2,48
    if(function == FUNC_RESV0)
    805e0da6:	02f58163          	beq	a1,a5,805e0dc8 <fpioa_set_function+0x52>
        if((fpioa->io[index].ch_sel == function) && (index != number))
    805e0daa:	0004071b          	sext.w	a4,s0
    805e0dae:	00271793          	slli	a5,a4,0x2
    805e0db2:	97ce                	add	a5,a5,s3
    805e0db4:	439c                	lw	a5,0(a5)
    805e0db6:	2405                	addiw	s0,s0,1
    805e0db8:	0ff7f793          	andi	a5,a5,255
    805e0dbc:	02978363          	beq	a5,s1,805e0de2 <fpioa_set_function+0x6c>
    for(index = 0; index < FPIOA_NUM_IO; index++)
    805e0dc0:	ff2415e3          	bne	s0,s2,805e0daa <fpioa_set_function+0x34>
            fpioa_set_function_raw(index, FUNC_RESV0);
    }
    fpioa_set_function_raw(number, function);
    805e0dc4:	85a6                	mv	a1,s1
    805e0dc6:	8552                	mv	a0,s4
    805e0dc8:	00000097          	auipc	ra,0x0
    805e0dcc:	f74080e7          	jalr	-140(ra) # 805e0d3c <fpioa_set_function_raw>
    return 0;
    805e0dd0:	4501                	li	a0,0
}
    805e0dd2:	70a2                	ld	ra,40(sp)
    805e0dd4:	7402                	ld	s0,32(sp)
    805e0dd6:	64e2                	ld	s1,24(sp)
    805e0dd8:	6942                	ld	s2,16(sp)
    805e0dda:	69a2                	ld	s3,8(sp)
    805e0ddc:	6a02                	ld	s4,0(sp)
    805e0dde:	6145                	addi	sp,sp,48
    805e0de0:	8082                	ret
            fpioa_set_function_raw(index, FUNC_RESV0);
    805e0de2:	07800593          	li	a1,120
    805e0de6:	853a                	mv	a0,a4
        if((fpioa->io[index].ch_sel == function) && (index != number))
    805e0de8:	fd470ce3          	beq	a4,s4,805e0dc0 <fpioa_set_function+0x4a>
            fpioa_set_function_raw(index, FUNC_RESV0);
    805e0dec:	00000097          	auipc	ra,0x0
    805e0df0:	f50080e7          	jalr	-176(ra) # 805e0d3c <fpioa_set_function_raw>
    for(index = 0; index < FPIOA_NUM_IO; index++)
    805e0df4:	fb241be3          	bne	s0,s2,805e0daa <fpioa_set_function+0x34>
    805e0df8:	b7f1                	j	805e0dc4 <fpioa_set_function+0x4e>
        return -1;
    805e0dfa:	557d                	li	a0,-1
}
    805e0dfc:	8082                	ret
        return -1;
    805e0dfe:	557d                	li	a0,-1
    805e0e00:	bfc9                	j	805e0dd2 <fpioa_set_function+0x5c>

00000000805e0e02 <fpioa_get_io_by_function>:
}

int fpioa_get_io_by_function(fpioa_function_t function)
{
    int index = 0;
    for(index = 0; index < FPIOA_NUM_IO; index++)
    805e0e02:	4781                	li	a5,0
    {
        if(fpioa->io[index].ch_sel == function)
    805e0e04:	502b06b7          	lui	a3,0x502b0
    for(index = 0; index < FPIOA_NUM_IO; index++)
    805e0e08:	03000613          	li	a2,48
    805e0e0c:	a021                	j	805e0e14 <fpioa_get_io_by_function+0x12>
    805e0e0e:	2785                	addiw	a5,a5,1
    805e0e10:	00c78c63          	beq	a5,a2,805e0e28 <fpioa_get_io_by_function+0x26>
        if(fpioa->io[index].ch_sel == function)
    805e0e14:	00279713          	slli	a4,a5,0x2
    805e0e18:	9736                	add	a4,a4,a3
    805e0e1a:	4318                	lw	a4,0(a4)
    805e0e1c:	0ff77713          	andi	a4,a4,255
    805e0e20:	fea717e3          	bne	a4,a0,805e0e0e <fpioa_get_io_by_function+0xc>
            return index;
    }

    return -1;
}
    805e0e24:	853e                	mv	a0,a5
    805e0e26:	8082                	ret
    return -1;
    805e0e28:	57fd                	li	a5,-1
}
    805e0e2a:	853e                	mv	a0,a5
    805e0e2c:	8082                	ret

00000000805e0e2e <set_bit>:
static gpiohs_pin_instance_t pin_instance[32];
*/

void set_bit(volatile uint32_t *bits, uint32_t mask, uint32_t value)
{
    uint32_t org = (*bits) & ~mask;
    805e0e2e:	411c                	lw	a5,0(a0)
    805e0e30:	2781                	sext.w	a5,a5
    *bits = org | (value & mask);
    805e0e32:	8e3d                	xor	a2,a2,a5
    805e0e34:	8df1                	and	a1,a1,a2
    805e0e36:	8fad                	xor	a5,a5,a1
    805e0e38:	c11c                	sw	a5,0(a0)
}
    805e0e3a:	8082                	ret

00000000805e0e3c <set_bit_offset>:

void set_bit_offset(volatile uint32_t *bits, uint32_t mask, size_t offset, uint32_t value)
{
    set_bit(bits, mask << offset, value << offset);
    805e0e3c:	0006079b          	sext.w	a5,a2
    805e0e40:	00f6963b          	sllw	a2,a3,a5
    805e0e44:	00f595bb          	sllw	a1,a1,a5
    805e0e48:	00000317          	auipc	t1,0x0
    805e0e4c:	fe630067          	jr	-26(t1) # 805e0e2e <set_bit>

00000000805e0e50 <set_gpio_bit>:
}

void set_gpio_bit(volatile uint32_t *bits, size_t offset, uint32_t value)
{
    set_bit_offset(bits, 1, offset, value);
    805e0e50:	86b2                	mv	a3,a2
    805e0e52:	862e                	mv	a2,a1
    805e0e54:	4585                	li	a1,1
    805e0e56:	00000317          	auipc	t1,0x0
    805e0e5a:	fe630067          	jr	-26(t1) # 805e0e3c <set_bit_offset>

00000000805e0e5e <get_bit>:
}

uint32_t get_bit(volatile uint32_t *bits, uint32_t mask, size_t offset)
{
    return ((*bits) & (mask << offset)) >> offset;
    805e0e5e:	411c                	lw	a5,0(a0)
    805e0e60:	2601                	sext.w	a2,a2
    805e0e62:	00c595bb          	sllw	a1,a1,a2
    805e0e66:	2781                	sext.w	a5,a5
    805e0e68:	8fed                	and	a5,a5,a1
}
    805e0e6a:	00c7d53b          	srlw	a0,a5,a2
    805e0e6e:	8082                	ret

00000000805e0e70 <get_gpio_bit>:

uint32_t get_gpio_bit(volatile uint32_t *bits, size_t offset)
{
    return get_bit(bits, 1, offset);
    805e0e70:	862e                	mv	a2,a1
    805e0e72:	4585                	li	a1,1
    805e0e74:	00000317          	auipc	t1,0x0
    805e0e78:	fea30067          	jr	-22(t1) # 805e0e5e <get_bit>

00000000805e0e7c <gpiohs_set_drive_mode>:




void gpiohs_set_drive_mode(uint8_t pin, gpio_drive_mode_t mode)
{
    805e0e7c:	1101                	addi	sp,sp,-32
    805e0e7e:	e426                	sd	s1,8(sp)
    805e0e80:	84aa                	mv	s1,a0
    int io_number = fpioa_get_io_by_function(FUNC_GPIOHS0 + pin);
    805e0e82:	0561                	addi	a0,a0,24
{
    805e0e84:	e822                	sd	s0,16(sp)
    805e0e86:	ec06                	sd	ra,24(sp)
    805e0e88:	842e                	mv	s0,a1
    int io_number = fpioa_get_io_by_function(FUNC_GPIOHS0 + pin);
    805e0e8a:	00000097          	auipc	ra,0x0
    805e0e8e:	f78080e7          	jalr	-136(ra) # 805e0e02 <fpioa_get_io_by_function>

    fpioa_pull_t pull = FPIOA_PULL_NONE;
    uint32_t dir = 0;

    switch(mode)
    805e0e92:	fff4059b          	addiw	a1,s0,-1
    805e0e96:	0005871b          	sext.w	a4,a1
    805e0e9a:	4789                	li	a5,2
    805e0e9c:	02e7fd63          	bleu	a4,a5,805e0ed6 <gpiohs_set_drive_mode+0x5a>
            break;
        default:
            break;
    }

    fpioa_set_io_pull(io_number, pull);
    805e0ea0:	4581                	li	a1,0
    805e0ea2:	00000097          	auipc	ra,0x0
    805e0ea6:	e3a080e7          	jalr	-454(ra) # 805e0cdc <fpioa_set_io_pull>
    volatile uint32_t *reg = dir ? gpiohs->output_en.u32 : gpiohs->input_en.u32;
    805e0eaa:	38001537          	lui	a0,0x38001
    805e0eae:	00450413          	addi	s0,a0,4 # 38001004 <_start-0x485deffc>
    volatile uint32_t *reg_d = !dir ? gpiohs->output_en.u32 : gpiohs->input_en.u32;
    805e0eb2:	0521                	addi	a0,a0,8
    set_gpio_bit(reg_d, pin, 0);
    805e0eb4:	85a6                	mv	a1,s1
    805e0eb6:	4601                	li	a2,0
    805e0eb8:	00000097          	auipc	ra,0x0
    805e0ebc:	f98080e7          	jalr	-104(ra) # 805e0e50 <set_gpio_bit>
    set_gpio_bit(reg, pin, 1);
    805e0ec0:	8522                	mv	a0,s0
}
    805e0ec2:	6442                	ld	s0,16(sp)
    805e0ec4:	60e2                	ld	ra,24(sp)
    set_gpio_bit(reg, pin, 1);
    805e0ec6:	85a6                	mv	a1,s1
}
    805e0ec8:	64a2                	ld	s1,8(sp)
    set_gpio_bit(reg, pin, 1);
    805e0eca:	4605                	li	a2,1
}
    805e0ecc:	6105                	addi	sp,sp,32
    set_gpio_bit(reg, pin, 1);
    805e0ece:	00000317          	auipc	t1,0x0
    805e0ed2:	f8230067          	jr	-126(t1) # 805e0e50 <set_gpio_bit>
    805e0ed6:	1582                	slli	a1,a1,0x20
    805e0ed8:	81f9                	srli	a1,a1,0x1e
    fpioa_set_io_pull(io_number, pull);
    805e0eda:	00001797          	auipc	a5,0x1
    805e0ede:	91e78793          	addi	a5,a5,-1762 # 805e17f8 <CSWTCH.2>
    805e0ee2:	00001717          	auipc	a4,0x1
    805e0ee6:	92670713          	addi	a4,a4,-1754 # 805e1808 <CSWTCH.3>
    805e0eea:	972e                	add	a4,a4,a1
    805e0eec:	95be                	add	a1,a1,a5
    805e0eee:	418c                	lw	a1,0(a1)
    805e0ef0:	4300                	lw	s0,0(a4)
    805e0ef2:	00000097          	auipc	ra,0x0
    805e0ef6:	dea080e7          	jalr	-534(ra) # 805e0cdc <fpioa_set_io_pull>
    volatile uint32_t *reg = dir ? gpiohs->output_en.u32 : gpiohs->input_en.u32;
    805e0efa:	38001537          	lui	a0,0x38001
    805e0efe:	c409                	beqz	s0,805e0f08 <gpiohs_set_drive_mode+0x8c>
    805e0f00:	00850413          	addi	s0,a0,8 # 38001008 <_start-0x485deff8>
    volatile uint32_t *reg_d = !dir ? gpiohs->output_en.u32 : gpiohs->input_en.u32;
    805e0f04:	0511                	addi	a0,a0,4
    805e0f06:	b77d                	j	805e0eb4 <gpiohs_set_drive_mode+0x38>
    volatile uint32_t *reg = dir ? gpiohs->output_en.u32 : gpiohs->input_en.u32;
    805e0f08:	00450413          	addi	s0,a0,4
    volatile uint32_t *reg_d = !dir ? gpiohs->output_en.u32 : gpiohs->input_en.u32;
    805e0f0c:	0521                	addi	a0,a0,8
    805e0f0e:	b75d                	j	805e0eb4 <gpiohs_set_drive_mode+0x38>

00000000805e0f10 <gpiohs_get_pin>:

gpio_pin_value_t gpiohs_get_pin(uint8_t pin)
{
    return get_gpio_bit(gpiohs->input_val.u32, pin);
    805e0f10:	85aa                	mv	a1,a0
    805e0f12:	38001537          	lui	a0,0x38001
    805e0f16:	00000317          	auipc	t1,0x0
    805e0f1a:	f5a30067          	jr	-166(t1) # 805e0e70 <get_gpio_bit>

00000000805e0f1e <flash2uint32>:
    val += app_flash_ptr[addr+1] << 8;
    805e0f1e:	0015079b          	addiw	a5,a0,1
    val += app_flash_ptr[addr+2] << 16;
    805e0f22:	0025069b          	addiw	a3,a0,2
    val += app_flash_ptr[addr+1] << 8;
    805e0f26:	1782                	slli	a5,a5,0x20
    val += app_flash_ptr[addr+2] << 16;
    805e0f28:	1682                	slli	a3,a3,0x20
    uint32_t val = app_flash_ptr[addr];
    805e0f2a:	54000737          	lui	a4,0x54000
    val += app_flash_ptr[addr+3] << 24;
    805e0f2e:	0035061b          	addiw	a2,a0,3
    val += app_flash_ptr[addr+1] << 8;
    805e0f32:	9381                	srli	a5,a5,0x20
    val += app_flash_ptr[addr+2] << 16;
    805e0f34:	9281                	srli	a3,a3,0x20
    val += app_flash_ptr[addr+1] << 8;
    805e0f36:	97ba                	add	a5,a5,a4
    val += app_flash_ptr[addr+2] << 16;
    805e0f38:	96ba                	add	a3,a3,a4
    uint32_t val = app_flash_ptr[addr];
    805e0f3a:	1502                	slli	a0,a0,0x20
    val += app_flash_ptr[addr+3] << 24;
    805e0f3c:	1602                	slli	a2,a2,0x20
    val += app_flash_ptr[addr+1] << 8;
    805e0f3e:	0007c783          	lbu	a5,0(a5)
    val += app_flash_ptr[addr+2] << 16;
    805e0f42:	0006c683          	lbu	a3,0(a3) # 502b0000 <_start-0x30330000>
    val += app_flash_ptr[addr+3] << 24;
    805e0f46:	9201                	srli	a2,a2,0x20
    uint32_t val = app_flash_ptr[addr];
    805e0f48:	9101                	srli	a0,a0,0x20
    805e0f4a:	953a                	add	a0,a0,a4
    val += app_flash_ptr[addr+3] << 24;
    805e0f4c:	9732                	add	a4,a4,a2
    uint32_t val = app_flash_ptr[addr];
    805e0f4e:	00054603          	lbu	a2,0(a0) # 38001000 <_start-0x485df000>
    val += app_flash_ptr[addr+3] << 24;
    805e0f52:	00074503          	lbu	a0,0(a4) # 54000000 <_start-0x2c5e0000>
    val += app_flash_ptr[addr+1] << 8;
    805e0f56:	0087979b          	slliw	a5,a5,0x8
    val += app_flash_ptr[addr+2] << 16;
    805e0f5a:	0106971b          	slliw	a4,a3,0x10
    805e0f5e:	9fb9                	addw	a5,a5,a4
    805e0f60:	9fb1                	addw	a5,a5,a2
    val += app_flash_ptr[addr+3] << 24;
    805e0f62:	0185151b          	slliw	a0,a0,0x18
}
    805e0f66:	9d3d                	addw	a0,a0,a5
    805e0f68:	8082                	ret

00000000805e0f6a <app_sha256>:
{
    805e0f6a:	711d                	addi	sp,sp,-96
    805e0f6c:	fc4e                	sd	s3,56(sp)
    int size = cfg_size+5;
    805e0f6e:	00001997          	auipc	s3,0x1
    805e0f72:	fd298993          	addi	s3,s3,-46 # 805e1f40 <cfg_size>
{
    805e0f76:	f05a                	sd	s6,32(sp)
    int size = cfg_size+5;
    805e0f78:	0009ab03          	lw	s6,0(s3)
    sha256_init(&context, size);
    805e0f7c:	00001517          	auipc	a0,0x1
    805e0f80:	07c50513          	addi	a0,a0,124 # 805e1ff8 <context>
{
    805e0f84:	e466                	sd	s9,8(sp)
    int size = cfg_size+5;
    805e0f86:	2b15                	addiw	s6,s6,5
    sha256_init(&context, size);
    805e0f88:	85da                	mv	a1,s6
{
    805e0f8a:	ec86                	sd	ra,88(sp)
    805e0f8c:	e8a2                	sd	s0,80(sp)
    805e0f8e:	e4a6                	sd	s1,72(sp)
    805e0f90:	e0ca                	sd	s2,64(sp)
    805e0f92:	f852                	sd	s4,48(sp)
    805e0f94:	f456                	sd	s5,40(sp)
    805e0f96:	ec5e                	sd	s7,24(sp)
    805e0f98:	e862                	sd	s8,16(sp)
    805e0f9a:	00001c97          	auipc	s9,0x1
    805e0f9e:	f86c8c93          	addi	s9,s9,-122 # 805e1f20 <cfg_address>
    sha256_init(&context, size);
    805e0fa2:	00000097          	auipc	ra,0x0
    805e0fa6:	184080e7          	jalr	388(ra) # 805e1126 <sha256_init>
    while (size > 0) {
    805e0faa:	09605663          	blez	s6,805e1036 <app_sha256+0xcc>
    uint32_t idx = 0;
    805e0fae:	4b81                	li	s7,0
    805e0fb0:	00001c97          	auipc	s9,0x1
    805e0fb4:	f70c8c93          	addi	s9,s9,-144 # 805e1f20 <cfg_address>
    805e0fb8:	00001917          	auipc	s2,0x1
    805e0fbc:	b6990913          	addi	s2,s2,-1175 # 805e1b21 <buffer+0x1>
        sz = (size >= 1024) ? 1024 : size;
    805e0fc0:	40000493          	li	s1,1024
    805e0fc4:	00001c17          	auipc	s8,0x1
    805e0fc8:	b5cc0c13          	addi	s8,s8,-1188 # 805e1b20 <buffer>
            buffer[n] = app_flash_ptr[cfg_address + idx + n];
    805e0fcc:	54000a37          	lui	s4,0x54000
        sha256_update(&context, buffer, sz);
    805e0fd0:	00001417          	auipc	s0,0x1
    805e0fd4:	02840413          	addi	s0,s0,40 # 805e1ff8 <context>
        sz = (size >= 1024) ? 1024 : size;
    805e0fd8:	87da                	mv	a5,s6
    805e0fda:	0164d463          	ble	s6,s1,805e0fe2 <app_sha256+0x78>
    805e0fde:	40000793          	li	a5,1024
            buffer[n] = app_flash_ptr[cfg_address + idx + n];
    805e0fe2:	000ca683          	lw	a3,0(s9)
    805e0fe6:	fff7861b          	addiw	a2,a5,-1
    805e0fea:	1602                	slli	a2,a2,0x20
    805e0fec:	9201                	srli	a2,a2,0x20
    805e0fee:	017686bb          	addw	a3,a3,s7
        sz = (size >= 1024) ? 1024 : size;
    805e0ff2:	00078a9b          	sext.w	s5,a5
        for (int n=0; n<sz; n++) {
    805e0ff6:	964a                	add	a2,a2,s2
            buffer[n] = app_flash_ptr[cfg_address + idx + n];
    805e0ff8:	00001717          	auipc	a4,0x1
    805e0ffc:	b2870713          	addi	a4,a4,-1240 # 805e1b20 <buffer>
    805e1000:	418686bb          	subw	a3,a3,s8
    805e1004:	00e687bb          	addw	a5,a3,a4
    805e1008:	1782                	slli	a5,a5,0x20
    805e100a:	9381                	srli	a5,a5,0x20
    805e100c:	97d2                	add	a5,a5,s4
    805e100e:	0007c783          	lbu	a5,0(a5)
    805e1012:	0705                	addi	a4,a4,1
    805e1014:	fef70fa3          	sb	a5,-1(a4)
        for (int n=0; n<sz; n++) {
    805e1018:	fec716e3          	bne	a4,a2,805e1004 <app_sha256+0x9a>
        sha256_update(&context, buffer, sz);
    805e101c:	8656                	mv	a2,s5
    805e101e:	85e2                	mv	a1,s8
    805e1020:	8522                	mv	a0,s0
        size -= sz;
    805e1022:	415b0b3b          	subw	s6,s6,s5
        sha256_update(&context, buffer, sz);
    805e1026:	00000097          	auipc	ra,0x0
    805e102a:	188080e7          	jalr	392(ra) # 805e11ae <sha256_update>
        idx += sz;
    805e102e:	015b8bbb          	addw	s7,s7,s5
    while (size > 0) {
    805e1032:	fb6043e3          	bgtz	s6,805e0fd8 <app_sha256+0x6e>
    sha256_final(&context, hash);
    805e1036:	00001597          	auipc	a1,0x1
    805e103a:	f1a58593          	addi	a1,a1,-230 # 805e1f50 <hash>
    805e103e:	00001517          	auipc	a0,0x1
    805e1042:	fba50513          	addi	a0,a0,-70 # 805e1ff8 <context>
    805e1046:	00000097          	auipc	ra,0x0
    805e104a:	20a080e7          	jalr	522(ra) # 805e1250 <sha256_final>
    offset = cfg_address + cfg_size + 5;
    805e104e:	000ca683          	lw	a3,0(s9)
    805e1052:	0009a783          	lw	a5,0(s3)
    805e1056:	00001617          	auipc	a2,0x1
    805e105a:	a9260613          	addi	a2,a2,-1390 # 805e1ae8 <app_hash>
    805e105e:	00001517          	auipc	a0,0x1
    805e1062:	aaa50513          	addi	a0,a0,-1366 # 805e1b08 <app_size>
    805e1066:	9ebd                	addw	a3,a3,a5
    805e1068:	2695                	addiw	a3,a3,5
    805e106a:	8732                	mv	a4,a2
    805e106c:	9e91                	subw	a3,a3,a2
        app_hash[n] = app_flash_ptr[offset + n];
    805e106e:	540005b7          	lui	a1,0x54000
    805e1072:	00e687bb          	addw	a5,a3,a4
    805e1076:	1782                	slli	a5,a5,0x20
    805e1078:	9381                	srli	a5,a5,0x20
    805e107a:	97ae                	add	a5,a5,a1
    805e107c:	0007c783          	lbu	a5,0(a5)
    805e1080:	0705                	addi	a4,a4,1
    805e1082:	fef70fa3          	sb	a5,-1(a4)
    for (int n=0; n<SHA256_HASH_LEN; n++) {
    805e1086:	fee516e3          	bne	a0,a4,805e1072 <app_sha256+0x108>
    805e108a:	00001797          	auipc	a5,0x1
    805e108e:	ec678793          	addi	a5,a5,-314 # 805e1f50 <hash>
    805e1092:	00001597          	auipc	a1,0x1
    805e1096:	ede58593          	addi	a1,a1,-290 # 805e1f70 <i>
    805e109a:	a019                	j	805e10a0 <app_sha256+0x136>
    for (idx=0; idx<SHA256_HASH_LEN; idx++) {
    805e109c:	04f58e63          	beq	a1,a5,805e10f8 <app_sha256+0x18e>
        if (hash[idx] != app_hash[idx]) {
    805e10a0:	0007c683          	lbu	a3,0(a5)
    805e10a4:	00064703          	lbu	a4,0(a2)
    805e10a8:	0785                	addi	a5,a5,1
    805e10aa:	0605                	addi	a2,a2,1
    805e10ac:	fee688e3          	beq	a3,a4,805e109c <app_sha256+0x132>
            LOG("SHA256 error, ");
    805e10b0:	00001797          	auipc	a5,0x1
    805e10b4:	ec878793          	addi	a5,a5,-312 # 805e1f78 <print_enabled>
    805e10b8:	4388                	lw	a0,0(a5)
    805e10ba:	c115                	beqz	a0,805e10de <app_sha256+0x174>
    805e10bc:	00001797          	auipc	a5,0x1
    805e10c0:	f0c7b783          	ld	a5,-244(a5) # 805e1fc8 <__TMC_END__+0x8>
    805e10c4:	639c                	ld	a5,0(a5)
    805e10c6:	00000517          	auipc	a0,0x0
    805e10ca:	75250513          	addi	a0,a0,1874 # 805e1818 <CSWTCH.3+0x10>
    805e10ce:	9782                	jalr	a5
    805e10d0:	0c800513          	li	a0,200
    805e10d4:	00000097          	auipc	ra,0x0
    805e10d8:	028080e7          	jalr	40(ra) # 805e10fc <usleep>
            return 0;
    805e10dc:	4501                	li	a0,0
}
    805e10de:	60e6                	ld	ra,88(sp)
    805e10e0:	6446                	ld	s0,80(sp)
    805e10e2:	64a6                	ld	s1,72(sp)
    805e10e4:	6906                	ld	s2,64(sp)
    805e10e6:	79e2                	ld	s3,56(sp)
    805e10e8:	7a42                	ld	s4,48(sp)
    805e10ea:	7aa2                	ld	s5,40(sp)
    805e10ec:	7b02                	ld	s6,32(sp)
    805e10ee:	6be2                	ld	s7,24(sp)
    805e10f0:	6c42                	ld	s8,16(sp)
    805e10f2:	6ca2                	ld	s9,8(sp)
    805e10f4:	6125                	addi	sp,sp,96
    805e10f6:	8082                	ret
    return 1;
    805e10f8:	4505                	li	a0,1
    805e10fa:	b7d5                	j	805e10de <app_sha256+0x174>

00000000805e10fc <usleep>:
#define BYTESWAP(x) ((ROTR((x), 8) & 0xff00ff00L) | (ROTL((x), 8) & 0x00ff00ffL))
#define BYTESWAP64(x) byteswap64(x)

int usleep(uint64_t usec)
{
    uint64_t cycle = read_cycle();
    805e10fc:	b0002773          	csrr	a4,mcycle
    uint64_t nop_all = usec * DEFAULT_CPU_CLOCK / 1000000UL;
    805e1100:	173ef7b7          	lui	a5,0x173ef
    805e1104:	d8078793          	addi	a5,a5,-640 # 173eed80 <_start-0x691f1280>
    805e1108:	02f50533          	mul	a0,a0,a5
    805e110c:	000f47b7          	lui	a5,0xf4
    805e1110:	24078793          	addi	a5,a5,576 # f4240 <_start-0x804ebdc0>
    805e1114:	02f55533          	divu	a0,a0,a5
    while(1)
    {
        if(read_cycle() - cycle >= nop_all)
    805e1118:	b00027f3          	csrr	a5,mcycle
    805e111c:	8f99                	sub	a5,a5,a4
    805e111e:	fea7ede3          	bltu	a5,a0,805e1118 <usleep+0x1c>
            break;
    }
    return 0;
}
    805e1122:	4501                	li	a0,0
    805e1124:	8082                	ret

00000000805e1126 <sha256_init>:
    uint32_t b = (uint32_t)x;
    return ((uint64_t)BYTESWAP(b) << 32) | (uint64_t)BYTESWAP(a);
}

void sha256_init(sha256_context_t *context, size_t input_len)
{
    805e1126:	1101                	addi	sp,sp,-32
    //sysctl_clock_enable(SYSCTL_CLOCK_SHA);
    sysctl->clk_en_cent.apb0_clk_en = 1;
    805e1128:	00001797          	auipc	a5,0x1
    805e112c:	ea87b783          	ld	a5,-344(a5) # 805e1fd0 <__TMC_END__+0x10>
{
    805e1130:	e822                	sd	s0,16(sp)
    sysctl->clk_en_cent.apb0_clk_en = 1;
    805e1132:	6380                	ld	s0,0(a5)
{
    805e1134:	e426                	sd	s1,8(sp)
    805e1136:	e04a                	sd	s2,0(sp)
    805e1138:	ec06                	sd	ra,24(sp)
    sysctl->clk_en_cent.apb0_clk_en = 1;
    805e113a:	5418                	lw	a4,40(s0)
    sysctl->clk_en_peri.sha_clk_en = 1;
    805e113c:	040006b7          	lui	a3,0x4000
{
    805e1140:	892a                	mv	s2,a0
    sysctl->clk_en_cent.apb0_clk_en = 1;
    805e1142:	00876713          	ori	a4,a4,8
    805e1146:	d418                	sw	a4,40(s0)
    sysctl->clk_en_peri.sha_clk_en = 1;
    805e1148:	5458                	lw	a4,44(s0)
    //sysctl_reset(SYSCTL_RESET_SHA);
    sysctl->peri_reset.sha_reset = 1;
    usleep(10);
    805e114a:	4529                	li	a0,10
{
    805e114c:	84ae                	mv	s1,a1
    sysctl->clk_en_peri.sha_clk_en = 1;
    805e114e:	8f55                	or	a4,a4,a3
    805e1150:	d458                	sw	a4,44(s0)
    sysctl->peri_reset.sha_reset = 1;
    805e1152:	585c                	lw	a5,52(s0)
    sysctl->peri_reset.sha_reset = 0;

    sha256->sha_num_reg.sha_data_cnt = (uint32_t)((input_len + SHA256_BLOCK_LEN + 8) / SHA256_BLOCK_LEN);
    805e1154:	04848493          	addi	s1,s1,72
    805e1158:	8099                	srli	s1,s1,0x6
    sysctl->peri_reset.sha_reset = 1;
    805e115a:	8fd5                	or	a5,a5,a3
    805e115c:	d85c                	sw	a5,52(s0)
    usleep(10);
    805e115e:	00000097          	auipc	ra,0x0
    805e1162:	f9e080e7          	jalr	-98(ra) # 805e10fc <usleep>
    sysctl->peri_reset.sha_reset = 0;
    805e1166:	585c                	lw	a5,52(s0)
    805e1168:	fc000737          	lui	a4,0xfc000
    805e116c:	177d                	addi	a4,a4,-1
    805e116e:	8ff9                	and	a5,a5,a4
    805e1170:	d85c                	sw	a5,52(s0)
    sha256->sha_num_reg.sha_data_cnt = (uint32_t)((input_len + SHA256_BLOCK_LEN + 8) / SHA256_BLOCK_LEN);
    805e1172:	502c07b7          	lui	a5,0x502c0
    805e1176:	5798                	lw	a4,40(a5)
    805e1178:	76c1                	lui	a3,0xffff0
    805e117a:	14c2                	slli	s1,s1,0x30
    805e117c:	8f75                	and	a4,a4,a3
    805e117e:	90c1                	srli	s1,s1,0x30
    805e1180:	8cd9                	or	s1,s1,a4
    805e1182:	d784                	sw	s1,40(a5)
    sha256->sha_function_reg_1.dma_en = 0x0;
    805e1184:	5bd8                	lw	a4,52(a5)
    sha256->sha_function_reg_0.sha_endian = SHA256_BIG_ENDIAN;
    805e1186:	66c1                	lui	a3,0x10
    sha256->sha_function_reg_1.dma_en = 0x0;
    805e1188:	9b79                	andi	a4,a4,-2
    805e118a:	dbd8                	sw	a4,52(a5)
    sha256->sha_function_reg_0.sha_endian = SHA256_BIG_ENDIAN;
    805e118c:	57d8                	lw	a4,44(a5)
    805e118e:	8f55                	or	a4,a4,a3
    805e1190:	d7d8                	sw	a4,44(a5)
    sha256->sha_function_reg_0.sha_en = ENABLE_SHA;
    805e1192:	57d8                	lw	a4,44(a5)
    805e1194:	00176713          	ori	a4,a4,1
    805e1198:	d7d8                	sw	a4,44(a5)
    context->total_len = 0L;
    context->buffer_len = 0L;
}
    805e119a:	60e2                	ld	ra,24(sp)
    805e119c:	6442                	ld	s0,16(sp)
    context->total_len = 0L;
    805e119e:	00093023          	sd	zero,0(s2)
    context->buffer_len = 0L;
    805e11a2:	00093423          	sd	zero,8(s2)
}
    805e11a6:	64a2                	ld	s1,8(sp)
    805e11a8:	6902                	ld	s2,0(sp)
    805e11aa:	6105                	addi	sp,sp,32
    805e11ac:	8082                	ret

00000000805e11ae <sha256_update>:
    const uint8_t *data = input;
    size_t buffer_bytes_left;
    size_t bytes_to_copy;
    uint32_t i;

    while(input_len)
    805e11ae:	c245                	beqz	a2,805e124e <sha256_update+0xa0>
{
    805e11b0:	7139                	addi	sp,sp,-64
    805e11b2:	f04a                	sd	s2,32(sp)
    805e11b4:	892a                	mv	s2,a0
    805e11b6:	6508                	ld	a0,8(a0)
    805e11b8:	f822                	sd	s0,48(sp)
    805e11ba:	ec4e                	sd	s3,24(sp)
    805e11bc:	e852                	sd	s4,16(sp)
    805e11be:	e456                	sd	s5,8(sp)
    805e11c0:	e05a                	sd	s6,0(sp)
    805e11c2:	fc06                	sd	ra,56(sp)
    805e11c4:	f426                	sd	s1,40(sp)
    805e11c6:	89b2                	mv	s3,a2
    805e11c8:	8a2e                	mv	s4,a1
    {
        buffer_bytes_left = SHA256_BLOCK_LEN - context->buffer_len;
    805e11ca:	04000b13          	li	s6,64
    805e11ce:	05090a93          	addi	s5,s2,80
        input_len -= bytes_to_copy;
        if(context->buffer_len == SHA256_BLOCK_LEN)
        {
            for(i = 0; i < 16; i++)
            {
                while(sha256->sha_function_reg_1.fifo_in_full)
    805e11d2:	502c0437          	lui	s0,0x502c0
        buffer_bytes_left = SHA256_BLOCK_LEN - context->buffer_len;
    805e11d6:	40ab04b3          	sub	s1,s6,a0
    805e11da:	0099f363          	bleu	s1,s3,805e11e0 <sha256_update+0x32>
    805e11de:	84ce                	mv	s1,s3
        memcpy(&context->buffer.bytes[context->buffer_len], data, bytes_to_copy);
    805e11e0:	0541                	addi	a0,a0,16
    805e11e2:	85d2                	mv	a1,s4
    805e11e4:	8626                	mv	a2,s1
    805e11e6:	954a                	add	a0,a0,s2
    805e11e8:	00000097          	auipc	ra,0x0
    805e11ec:	144080e7          	jalr	324(ra) # 805e132c <memcpy>
        context->total_len += bytes_to_copy * 8L;
    805e11f0:	00093783          	ld	a5,0(s2)
        context->buffer_len += bytes_to_copy;
    805e11f4:	00893503          	ld	a0,8(s2)
        context->total_len += bytes_to_copy * 8L;
    805e11f8:	00349713          	slli	a4,s1,0x3
    805e11fc:	97ba                	add	a5,a5,a4
        context->buffer_len += bytes_to_copy;
    805e11fe:	9526                	add	a0,a0,s1
        context->total_len += bytes_to_copy * 8L;
    805e1200:	00f93023          	sd	a5,0(s2)
        context->buffer_len += bytes_to_copy;
    805e1204:	00a93423          	sd	a0,8(s2)
        data += bytes_to_copy;
    805e1208:	9a26                	add	s4,s4,s1
        input_len -= bytes_to_copy;
    805e120a:	409989b3          	sub	s3,s3,s1
        if(context->buffer_len == SHA256_BLOCK_LEN)
    805e120e:	01650e63          	beq	a0,s6,805e122a <sha256_update+0x7c>
    while(input_len)
    805e1212:	fc0992e3          	bnez	s3,805e11d6 <sha256_update+0x28>
                sha256->sha_data_in1 = context->buffer.words[i];
            }
            context->buffer_len = 0L;
        }
    }
}
    805e1216:	70e2                	ld	ra,56(sp)
    805e1218:	7442                	ld	s0,48(sp)
    805e121a:	74a2                	ld	s1,40(sp)
    805e121c:	7902                	ld	s2,32(sp)
    805e121e:	69e2                	ld	s3,24(sp)
    805e1220:	6a42                	ld	s4,16(sp)
    805e1222:	6aa2                	ld	s5,8(sp)
    805e1224:	6b02                	ld	s6,0(sp)
    805e1226:	6121                	addi	sp,sp,64
    805e1228:	8082                	ret
    805e122a:	01090713          	addi	a4,s2,16
                while(sha256->sha_function_reg_1.fifo_in_full)
    805e122e:	585c                	lw	a5,52(s0)
    805e1230:	0087d79b          	srliw	a5,a5,0x8
    805e1234:	8b85                	andi	a5,a5,1
    805e1236:	ffe5                	bnez	a5,805e122e <sha256_update+0x80>
                sha256->sha_data_in1 = context->buffer.words[i];
    805e1238:	431c                	lw	a5,0(a4)
    805e123a:	0711                	addi	a4,a4,4
    805e123c:	d01c                	sw	a5,32(s0)
            for(i = 0; i < 16; i++)
    805e123e:	feea98e3          	bne	s5,a4,805e122e <sha256_update+0x80>
            context->buffer_len = 0L;
    805e1242:	00093423          	sd	zero,8(s2)
    805e1246:	4501                	li	a0,0
    while(input_len)
    805e1248:	f80997e3          	bnez	s3,805e11d6 <sha256_update+0x28>
    805e124c:	b7e9                	j	805e1216 <sha256_update+0x68>
    805e124e:	8082                	ret

00000000805e1250 <sha256_final>:
{
    size_t bytes_to_pad;
    size_t length_pad;
    uint32_t i;

    bytes_to_pad = 120L - context->buffer_len;
    805e1250:	651c                	ld	a5,8(a0)
{
    805e1252:	7179                	addi	sp,sp,-48
    bytes_to_pad = 120L - context->buffer_len;
    805e1254:	07800613          	li	a2,120
{
    805e1258:	f022                	sd	s0,32(sp)
    805e125a:	ec26                	sd	s1,24(sp)
    805e125c:	f406                	sd	ra,40(sp)
    if(bytes_to_pad > 64L)
    805e125e:	04000713          	li	a4,64
    bytes_to_pad = 120L - context->buffer_len;
    805e1262:	8e1d                	sub	a2,a2,a5
{
    805e1264:	84aa                	mv	s1,a0
    805e1266:	842e                	mv	s0,a1
    if(bytes_to_pad > 64L)
    805e1268:	00c77563          	bleu	a2,a4,805e1272 <sha256_final+0x22>
        bytes_to_pad -= 64L;
    805e126c:	03800613          	li	a2,56
    805e1270:	8e1d                	sub	a2,a2,a5
    length_pad = BYTESWAP64(context->total_len);
    805e1272:	6098                	ld	a4,0(s1)
    return ((uint64_t)BYTESWAP(b) << 32) | (uint64_t)BYTESWAP(a);
    805e1274:	ff010337          	lui	t1,0xff010
    805e1278:	00ff08b7          	lui	a7,0xff0
    uint32_t a = (uint32_t)(x >> 32);
    805e127c:	42075593          	srai	a1,a4,0x20
    uint32_t b = (uint32_t)x;
    805e1280:	2701                	sext.w	a4,a4
    return ((uint64_t)BYTESWAP(b) << 32) | (uint64_t)BYTESWAP(a);
    805e1282:	01871e9b          	slliw	t4,a4,0x18
    805e1286:	0087181b          	slliw	a6,a4,0x8
    805e128a:	01859e1b          	slliw	t3,a1,0x18
    805e128e:	0085951b          	slliw	a0,a1,0x8
    805e1292:	0087579b          	srliw	a5,a4,0x8
    805e1296:	0187569b          	srliw	a3,a4,0x18
    805e129a:	0085d71b          	srliw	a4,a1,0x8
    805e129e:	0185d59b          	srliw	a1,a1,0x18
    805e12a2:	f0030313          	addi	t1,t1,-256 # ffffffffff00ff00 <context+0xffffffff7ea2df08>
    805e12a6:	0ff88893          	addi	a7,a7,255 # ff00ff <_start-0x7f5eff01>
    805e12aa:	01c76733          	or	a4,a4,t3
    805e12ae:	8dc9                	or	a1,a1,a0
    805e12b0:	0115f5b3          	and	a1,a1,a7
    805e12b4:	01d7e7b3          	or	a5,a5,t4
    805e12b8:	00d866b3          	or	a3,a6,a3
    805e12bc:	00677733          	and	a4,a4,t1
    805e12c0:	0067f7b3          	and	a5,a5,t1
    805e12c4:	0116f6b3          	and	a3,a3,a7
    805e12c8:	8f4d                	or	a4,a4,a1
    805e12ca:	8fd5                	or	a5,a5,a3
    805e12cc:	1702                	slli	a4,a4,0x20
    805e12ce:	9301                	srli	a4,a4,0x20
    805e12d0:	1782                	slli	a5,a5,0x20
    805e12d2:	8fd9                	or	a5,a5,a4
    sha256_update(context, padding, bytes_to_pad);
    805e12d4:	00000597          	auipc	a1,0x0
    805e12d8:	7bc58593          	addi	a1,a1,1980 # 805e1a90 <padding>
    805e12dc:	8526                	mv	a0,s1
    length_pad = BYTESWAP64(context->total_len);
    805e12de:	e43e                	sd	a5,8(sp)
    sha256_update(context, padding, bytes_to_pad);
    805e12e0:	00000097          	auipc	ra,0x0
    805e12e4:	ece080e7          	jalr	-306(ra) # 805e11ae <sha256_update>
    sha256_update(context, &length_pad, 8L);
    805e12e8:	4621                	li	a2,8
    805e12ea:	002c                	addi	a1,sp,8
    805e12ec:	8526                	mv	a0,s1
    805e12ee:	00000097          	auipc	ra,0x0
    805e12f2:	ec0080e7          	jalr	-320(ra) # 805e11ae <sha256_update>
    while(!(sha256->sha_function_reg_0.sha_en))
    805e12f6:	502c0737          	lui	a4,0x502c0
    805e12fa:	575c                	lw	a5,44(a4)
    805e12fc:	8b85                	andi	a5,a5,1
    805e12fe:	dff5                	beqz	a5,805e12fa <sha256_final+0xaa>
        ;
    if(output)
    805e1300:	c00d                	beqz	s0,805e1322 <sha256_final+0xd2>
    {
        for(i = 0; i < SHA256_HASH_WORDS; i++)
        {
            *((uint32_t *)output) = sha256->sha_result[SHA256_HASH_WORDS - i - 1];
    805e1302:	4f5c                	lw	a5,28(a4)
    805e1304:	c01c                	sw	a5,0(s0)
    805e1306:	4f1c                	lw	a5,24(a4)
    805e1308:	c05c                	sw	a5,4(s0)
    805e130a:	4b5c                	lw	a5,20(a4)
    805e130c:	c41c                	sw	a5,8(s0)
    805e130e:	4b1c                	lw	a5,16(a4)
    805e1310:	c45c                	sw	a5,12(s0)
    805e1312:	475c                	lw	a5,12(a4)
    805e1314:	c81c                	sw	a5,16(s0)
    805e1316:	471c                	lw	a5,8(a4)
    805e1318:	c85c                	sw	a5,20(s0)
    805e131a:	435c                	lw	a5,4(a4)
    805e131c:	cc1c                	sw	a5,24(s0)
    805e131e:	431c                	lw	a5,0(a4)
    805e1320:	cc5c                	sw	a5,28(s0)
            output += 4;
        }
    }
}
    805e1322:	70a2                	ld	ra,40(sp)
    805e1324:	7402                	ld	s0,32(sp)
    805e1326:	64e2                	ld	s1,24(sp)
    805e1328:	6145                	addi	sp,sp,48
    805e132a:	8082                	ret

00000000805e132c <memcpy>:
    805e132c:	00a5c7b3          	xor	a5,a1,a0
    805e1330:	8b9d                	andi	a5,a5,7
    805e1332:	00c50733          	add	a4,a0,a2
    805e1336:	e781                	bnez	a5,805e133e <memcpy+0x12>
    805e1338:	479d                	li	a5,7
    805e133a:	00c7ee63          	bltu	a5,a2,805e1356 <memcpy+0x2a>
    805e133e:	87aa                	mv	a5,a0
    805e1340:	0ae57063          	bleu	a4,a0,805e13e0 <memcpy+0xb4>
    805e1344:	0005c683          	lbu	a3,0(a1)
    805e1348:	0785                	addi	a5,a5,1
    805e134a:	0585                	addi	a1,a1,1
    805e134c:	fed78fa3          	sb	a3,-1(a5) # 502bffff <_start-0x30320001>
    805e1350:	fee7eae3          	bltu	a5,a4,805e1344 <memcpy+0x18>
    805e1354:	8082                	ret
    805e1356:	00757693          	andi	a3,a0,7
    805e135a:	87aa                	mv	a5,a0
    805e135c:	ca91                	beqz	a3,805e1370 <memcpy+0x44>
    805e135e:	0005c683          	lbu	a3,0(a1)
    805e1362:	0785                	addi	a5,a5,1
    805e1364:	0585                	addi	a1,a1,1
    805e1366:	fed78fa3          	sb	a3,-1(a5)
    805e136a:	0077f693          	andi	a3,a5,7
    805e136e:	b7fd                	j	805e135c <memcpy+0x30>
    805e1370:	ff877693          	andi	a3,a4,-8
    805e1374:	fc068613          	addi	a2,a3,-64 # ffc0 <_start-0x805d0040>
    805e1378:	06c7f063          	bleu	a2,a5,805e13d8 <memcpy+0xac>
    805e137c:	0005b383          	ld	t2,0(a1)
    805e1380:	0085b283          	ld	t0,8(a1)
    805e1384:	0105bf83          	ld	t6,16(a1)
    805e1388:	0185bf03          	ld	t5,24(a1)
    805e138c:	0205be83          	ld	t4,32(a1)
    805e1390:	0285be03          	ld	t3,40(a1)
    805e1394:	0305b303          	ld	t1,48(a1)
    805e1398:	0385b883          	ld	a7,56(a1)
    805e139c:	04858593          	addi	a1,a1,72
    805e13a0:	0077b023          	sd	t2,0(a5)
    805e13a4:	ff85b803          	ld	a6,-8(a1)
    805e13a8:	0057b423          	sd	t0,8(a5)
    805e13ac:	01f7b823          	sd	t6,16(a5)
    805e13b0:	01e7bc23          	sd	t5,24(a5)
    805e13b4:	03d7b023          	sd	t4,32(a5)
    805e13b8:	03c7b423          	sd	t3,40(a5)
    805e13bc:	0267b823          	sd	t1,48(a5)
    805e13c0:	0317bc23          	sd	a7,56(a5)
    805e13c4:	04878793          	addi	a5,a5,72
    805e13c8:	ff07bc23          	sd	a6,-8(a5)
    805e13cc:	b775                	j	805e1378 <memcpy+0x4c>
    805e13ce:	6190                	ld	a2,0(a1)
    805e13d0:	07a1                	addi	a5,a5,8
    805e13d2:	05a1                	addi	a1,a1,8
    805e13d4:	fec7bc23          	sd	a2,-8(a5)
    805e13d8:	fed7ebe3          	bltu	a5,a3,805e13ce <memcpy+0xa2>
    805e13dc:	f6e7e4e3          	bltu	a5,a4,805e1344 <memcpy+0x18>
    805e13e0:	8082                	ret
    805e13e2:	0000                	unimp
    805e13e4:	0000                	unimp
	...
